<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js"></script>
<meta name="robots" content="noindex, nofollow">

    <meta name="description" content="å‰è¨€é€šå¸¸ï¼Œä¸€ä¸ªè®¾è®¡æ¨¡å¼æè¿°äº†ä¸€ä¸ªè¢«è¯æ˜å¯è¡Œçš„æ–¹æ¡ˆã€‚è¿™äº›æ–¹æ¡ˆéå¸¸å¹¿æ³›ï¼Œæ˜¯å…·æœ‰å®Œæ•´å®šä¹‰çš„æœ€å¸¸ç”¨çš„è¡Œå¼ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§å¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†çš„è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾çš„è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨ç°åœ¨ä¸­éƒ½æœ‰ç›¸åº”çš„åŸç†æ¥ä¸ä¹‹å¯¹åº”ï¼Œæ¯ä¸€ä¸ªæ¨¡å¼æ">
<meta property="og:type" content="article">
<meta property="og:title" content="Java è®¾è®¡æ¨¡å¼">
<meta property="og:url" content="http://example.com/2024/09/21/study/Java%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="Panzejia">
<meta property="og:description" content="å‰è¨€é€šå¸¸ï¼Œä¸€ä¸ªè®¾è®¡æ¨¡å¼æè¿°äº†ä¸€ä¸ªè¢«è¯æ˜å¯è¡Œçš„æ–¹æ¡ˆã€‚è¿™äº›æ–¹æ¡ˆéå¸¸å¹¿æ³›ï¼Œæ˜¯å…·æœ‰å®Œæ•´å®šä¹‰çš„æœ€å¸¸ç”¨çš„è¡Œå¼ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§å¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†çš„è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾çš„è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨ç°åœ¨ä¸­éƒ½æœ‰ç›¸åº”çš„åŸç†æ¥ä¸ä¹‹å¯¹åº”ï¼Œæ¯ä¸€ä¸ªæ¨¡å¼æ">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-09-21T02:01:56.000Z">
<meta property="article:modified_time" content="2024-09-23T08:15:43.770Z">
<meta property="article:author" content="Panzejia">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2024/09/21/study/Java%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2024/09/21/study/Java%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","path":"2024/09/21/study/Java è®¾è®¡æ¨¡å¼/","title":"Java è®¾è®¡æ¨¡å¼"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Java è®¾è®¡æ¨¡å¼ | Panzejia</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Panzejia</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-å­¦ä¹ "><a href="/categories/%E5%AD%A6%E4%B9%A0/" rel="section"><i class="pen fa-fw"></i>å­¦ä¹ </a></li><li class="menu-item menu-item-æŠ€æœ¯"><a href="/categories/%E6%8A%80%E6%9C%AF/" rel="section"><i class="pen fa-fw"></i>æŠ€æœ¯</a></li><li class="menu-item menu-item-ä¹¦ç±"><a href="/categories/%E4%B9%A6%E7%B1%8D/" rel="section"><i class="pen fa-fw"></i>ä¹¦ç±</a></li><li class="menu-item menu-item-èœè°±"><a href="/categories/%E8%8F%9C%E8%B0%B1/" rel="section"><i class="pen fa-fw"></i>èœè°±</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">2.</span> <span class="nav-text">è®¾è®¡æ¨¡å¼çš„åˆ†ç±»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8E%9F%E5%88%99"><span class="nav-number">3.</span> <span class="nav-text">è®¾è®¡æ¨¡å¼çš„åŸåˆ™</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%EF%BC%88Open-Close-Principle%EF%BC%89"><span class="nav-number">3.1.</span> <span class="nav-text">å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8C%E6%B0%8F%E4%BB%A3%E6%8D%A2%E5%8E%9F%E5%88%99%EF%BC%88Liskov-Substitution-Principle%EF%BC%89"><span class="nav-number">3.2.</span> <span class="nav-text">é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99%EF%BC%88Dependence-Inversion-Principle%EF%BC%89"><span class="nav-number">3.3.</span> <span class="nav-text">ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99%EF%BC%88Interface-Segregation-Principle%EF%BC%89"><span class="nav-number">3.4.</span> <span class="nav-text">æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Panzejia</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/09/21/study/Java%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Panzejia">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Panzejia">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Java è®¾è®¡æ¨¡å¼ | Panzejia">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java è®¾è®¡æ¨¡å¼
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2024-09-21 10:01:56" itemprop="dateCreated datePublished" datetime="2024-09-21T10:01:56+08:00">2024-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-09-23 16:15:43" itemprop="dateModified" datetime="2024-09-23T16:15:43+08:00">2024-09-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">å­¦ä¹ </span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>é€šå¸¸ï¼Œä¸€ä¸ªè®¾è®¡æ¨¡å¼æè¿°äº†ä¸€ä¸ªè¢«è¯æ˜å¯è¡Œçš„æ–¹æ¡ˆã€‚è¿™äº›æ–¹æ¡ˆéå¸¸å¹¿æ³›ï¼Œæ˜¯å…·æœ‰å®Œæ•´å®šä¹‰çš„æœ€å¸¸ç”¨çš„è¡Œå¼ã€‚<br>ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§å¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†çš„è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾çš„è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨ç°åœ¨ä¸­éƒ½æœ‰ç›¸åº”çš„åŸç†æ¥ä¸ä¹‹å¯¹åº”ï¼Œæ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯å®ƒèƒ½è¢«å¹¿æ³›åº”ç”¨çš„åŸå› ã€‚<br>æœ¬æ–‡ç€é‡è®²è§£åŸºäºjavaçš„23ç§è®¾è®¡æ¨¡å¼åŸç†å’Œå®ç°æ ·ä¾‹</p>
<h3 id="è®¾è®¡æ¨¡å¼çš„åˆ†ç±»"><a href="#è®¾è®¡æ¨¡å¼çš„åˆ†ç±»" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„åˆ†ç±»"></a>è®¾è®¡æ¨¡å¼çš„åˆ†ç±»</h3><p><strong>åˆ›å»ºå‹æ¨¡å¼</strong>ï¼Œå…±äº”ç§ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼ã€‚<br><strong>ç»“æ„å‹æ¨¡å¼</strong>ï¼Œå…±ä¸ƒç§ï¼šé€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚<br><strong>è¡Œä¸ºå‹æ¨¡å¼</strong>ï¼Œå…±åä¸€ç§ï¼šç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å­æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€‚<br>å…¶å®è¿˜æœ‰ä¸¤ç±»ï¼šå¹¶å‘å‹æ¨¡å¼å’Œçº¿ç¨‹æ± æ¨¡å¼ã€‚ç”¨ä¸€ä¸ªå›¾ç‰‡æ¥æ•´ä½“æè¿°ä¸€ä¸‹ï¼š</p>
<span id="more"></span>
<h3 id="è®¾è®¡æ¨¡å¼çš„åŸåˆ™"><a href="#è®¾è®¡æ¨¡å¼çš„åŸåˆ™" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„åŸåˆ™"></a>è®¾è®¡æ¨¡å¼çš„åŸåˆ™</h3><h4 id="å¼€é—­åŸåˆ™ï¼ˆOpen-Close-Principleï¼‰"><a href="#å¼€é—­åŸåˆ™ï¼ˆOpen-Close-Principleï¼‰" class="headerlink" title="å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰"></a>å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰</h4><p>å¼€é—­åŸåˆ™å°±æ˜¯è¯´å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚æ‰€ä»¥ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚</p>
<h4 id="é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov-Substitution-Principleï¼‰"><a href="#é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov-Substitution-Principleï¼‰" class="headerlink" title="é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰"></a>é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰</h4><p>é‡Œæ°ä»£æ¢åŸåˆ™(Liskov Substitution Principle LSP)é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚ LSPæ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹â€œå¼€-é—­â€åŸåˆ™çš„è¡¥å……ã€‚å®ç°â€œå¼€-é—­â€åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ã€‚è€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚â€”â€” From Baidu ç™¾ç§‘</p>
<h4 id="ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence-Inversion-Principleï¼‰"><a href="#ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence-Inversion-Principleï¼‰" class="headerlink" title="ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰"></a>ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰</h4><p>è¿™ä¸ªæ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šçœŸå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚</p>
<h4 id="æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface-Segregation-Principleï¼‰"><a href="#æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface-Segregation-Principleï¼‰" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰"></a>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰</h4><p>è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚è¿˜æ˜¯ä¸€ä¸ªé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦çš„æ„æ€ï¼Œä»è¿™å„¿æˆ‘ä»¬çœ‹å‡ºï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ä¸ªè½¯ä»¶çš„è®¾è®¡æ€æƒ³ï¼Œä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ï¼Œä¸ºäº†å‡çº§å’Œç»´æŠ¤æ–¹ä¾¿ã€‚æ‰€ä»¥ä¸Šæ–‡ä¸­å¤šæ¬¡å‡ºç°ï¼šé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚</p>
<p>5ã€â˜˜ï¸è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ï¼ˆDemeter Principleï¼‰<br>ä¸ºä»€ä¹ˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå°±æ˜¯è¯´ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘çš„ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚</p>
<p>6ã€â˜˜ï¸åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰<br>å››ã€ğŸ€23ç§è®¾è®¡æ¨¡å¼<br>4.1 â˜˜ï¸å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰<br>å·¥å‚æ¨¡å¼æä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœºåˆ¶ï¼Œé€šè¿‡å·¥å‚æ–¹æ³•æ¥æ ¹æ®ç»™å®šçš„å‚æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ç§æ¨¡å¼å¯ä»¥é¿å…ç›´æ¥ä½¿ç”¨newæ“ä½œç¬¦æ¥åˆ›å»ºå¯¹è±¡ï¼Œæé«˜äº†ä»£ç çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<p>4.1.1 ğŸŒ¿æ™®é€šå·¥å‚æ¨¡å¼</p>
<p>å»ºç«‹ä¸€ä¸ªå·¥å‚ç±»ï¼Œå¯¹å®ç°äº†åŒä¸€æ¥å£çš„ä¸€äº›ç±»è¿›è¡Œå®ä¾‹çš„åˆ›å»ºã€‚</p>
<p>ä¸¾ä¾‹å¦‚ä¸‹ï¼šï¼ˆæˆ‘ä»¬ä¸¾ä¸€ä¸ªå‘é€é‚®ä»¶å’ŒçŸ­ä¿¡çš„ä¾‹å­ï¼‰<br>é¦–å…ˆï¼Œåˆ›å»ºäºŒè€…çš„å…±åŒæ¥å£ï¼š</p>
<p>public interface Sender {<br> public void Send();<br>}<br>1<br>2<br>3<br>å…¶æ¬¡ï¼Œåˆ›å»ºå®ç°ç±»ï¼š</p>
<p>public class MailSender implements Sender {<br> @Override<br> public void Send() {<br>  System.out.println(â€œthis is mailsender!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>public class SmsSender implements Sender { </p>
<p> @Override<br> public void Send() {<br>  System.out.println(â€œthis is sms sender!â€);<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>æœ€åï¼Œå»ºå·¥å‚ç±»ï¼š</p>
<p>public class SendFactory {<br> public Sender produce(String type) {<br>  if (â€œmailâ€.equals(type)) {<br>   return new MailSender();<br>  } else if (â€œsmsâ€.equals(type)) {<br>   return new SmsSender();<br>  } else {<br>   System.out.println(â€œè¯·è¾“å…¥æ­£ç¡®çš„ç±»å‹!â€);<br>   return null;<br>  }<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹ï¼š</p>
<p>public class FactoryTest {<br> public static void main(String[] args) {<br>  SendFactory factory = new SendFactory();<br>  Sender sender = factory.produce(â€œsmsâ€);<br>  sender.Send();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>è¾“å‡ºï¼šthis is sms sender!</p>
<p>4.1.2 ğŸŒ¿å¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼</p>
<p>æ™®é€šå·¥å‚æ–¹æ³•æ¨¡å¼çš„æ”¹è¿›ï¼Œåœ¨æ™®é€šå·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå¦‚æœä¼ é€’çš„å­—ç¬¦ä¸²å‡ºé”™ï¼Œåˆ™ä¸èƒ½æ­£ç¡®åˆ›å»ºå¯¹è±¡ï¼Œè€Œå¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯æä¾›å¤šä¸ªå·¥å‚æ–¹æ³•ï¼Œåˆ†åˆ«åˆ›å»ºå¯¹è±¡ã€‚å…³ç³»å›¾ï¼š</p>
<p>å°†ä¸Šé¢çš„ä»£ç åšä¸‹ä¿®æ”¹ï¼Œæ”¹åŠ¨ä¸‹SendFactoryç±»å°±è¡Œï¼Œå¦‚ä¸‹ï¼š</p>
<p>view plaincopypublic class SendFactory {<br> public Sender produceMail(){<br>  return new MailSender();<br> } </p>
<p> public Sender produceSms(){<br>  return new SmsSender();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>æµ‹è¯•ç±»å¦‚ä¸‹ï¼š</p>
<p>public class FactoryTest {<br> public static void main(String[] args) {<br>  SendFactory factory = new SendFactory();<br>  Sender sender = factory.produceMail();<br>  sender.Send();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>è¾“å‡ºï¼šthis is mailsender!</p>
<p>4.1.3 ğŸŒ¿é™æ€å·¥å‚æ–¹æ³•æ¨¡å¼</p>
<p>å°†ä¸Šé¢çš„å¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼é‡Œçš„æ–¹æ³•ç½®ä¸ºé™æ€çš„ï¼Œä¸éœ€è¦åˆ›å»ºå®ä¾‹ï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚</p>
<p>public class SendFactory { </p>
<p> public static Sender produceMail(){<br>  return new MailSender();<br> }<br> public static Sender produceSms(){<br>  return new SmsSender();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>public class FactoryTest { </p>
<p> public static void main(String[] args) {<br>  Sender sender = SendFactory.produceMail();<br>  sender.Send();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>å·¥å‚æ¨¡å¼é€‚åˆï¼šå‡¡æ˜¯å‡ºç°äº†å¤§é‡çš„äº§å“éœ€è¦åˆ›å»ºï¼Œå¹¶ä¸”å…·æœ‰å…±åŒçš„æ¥å£æ—¶ï¼Œå¯ä»¥é€šè¿‡å·¥å‚æ–¹æ³•æ¨¡å¼è¿›è¡Œåˆ›å»ºã€‚åœ¨ä»¥ä¸Šçš„ä¸‰ç§æ¨¡å¼ä¸­ï¼Œç¬¬ä¸€ç§å¦‚æœä¼ å…¥çš„å­—ç¬¦ä¸²æœ‰è¯¯ï¼Œä¸èƒ½æ­£ç¡®åˆ›å»ºå¯¹è±¡ï¼Œç¬¬ä¸‰ç§ç›¸å¯¹äºç¬¬äºŒç§ï¼Œä¸éœ€è¦å®ä¾‹åŒ–å·¥å‚ç±»ï¼Œæ‰€ä»¥ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé€‰ç”¨ç¬¬ä¸‰ç§â€”â€”é™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚</p>
<p>4.2 â˜˜ï¸æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰<br>å·¥å‚æ–¹æ³•æ¨¡å¼æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œç±»çš„åˆ›å»ºä¾èµ–å·¥å‚ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³è¦æ‹“å±•ç¨‹åºï¼Œå¿…é¡»å¯¹å·¥å‚ç±»è¿›è¡Œä¿®æ”¹ï¼Œè¿™è¿èƒŒäº†é—­åŒ…åŸåˆ™ï¼Œæ‰€ä»¥ï¼Œä»è®¾è®¡è§’åº¦è€ƒè™‘ï¼Œæœ‰ä¸€å®šçš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿå°±ç”¨åˆ°æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œåˆ›å»ºå¤šä¸ªå·¥å‚ç±»ï¼Œè¿™æ ·ä¸€æ—¦éœ€è¦å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œç›´æ¥å¢åŠ æ–°çš„å·¥å‚ç±»å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ä¿®æ”¹ä¹‹å‰çš„ä»£ç ã€‚å› ä¸ºæŠ½è±¡å·¥å‚ä¸å¤ªå¥½ç†è§£ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å›¾ï¼Œç„¶åå°±å’Œä»£ç ï¼Œå°±æ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚</p>
<p>è¯·çœ‹ä¾‹å­ï¼š</p>
<p>public interface Sender {<br> public void Send();<br>}<br>1<br>2<br>3<br>ä¸¤ä¸ªå®ç°ç±»ï¼š</p>
<p>public class MailSender implements Sender {<br> @Override<br> public void Send() {<br>  System.out.println(â€œthis is mailsender!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>public class SmsSender implements Sender { </p>
<p> @Override<br> public void Send() {<br>  System.out.println(â€œthis is sms sender!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>ä¸¤ä¸ªå·¥å‚ç±»ï¼š</p>
<p>public class SendMailFactory implements Provider { </p>
<p> @Override<br> public Sender produce(){<br>  return new MailSender();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>public class SendSmsFactory implements Provider{<br> @Override<br> public Sender produce() {<br>  return new SmsSender();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>åœ¨æä¾›ä¸€ä¸ªæ¥å£ï¼š</p>
<p>public interface Provider {<br> public Sender produce();<br>}<br>1<br>2<br>3<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class Test {<br> public static void main(String[] args) {<br>  Provider provider = new SendMailFactory();<br>  Sender sender = provider.produce();<br>  sender.Send();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>å…¶å®è¿™ä¸ªæ¨¡å¼çš„å¥½å¤„å°±æ˜¯ï¼Œå¦‚æœä½ ç°åœ¨æƒ³å¢åŠ ä¸€ä¸ªåŠŸèƒ½ï¼šå‘åŠæ—¶ä¿¡æ¯ï¼Œåˆ™åªéœ€åšä¸€ä¸ªå®ç°ç±»ï¼Œå®ç°Senderæ¥å£ï¼ŒåŒæ—¶åšä¸€ä¸ªå·¥å‚ç±»ï¼Œå®ç°Provideræ¥å£ï¼Œå°±OKäº†ï¼Œæ— éœ€å»æ”¹åŠ¨ç°æˆçš„ä»£ç ã€‚è¿™æ ·åšï¼Œæ‹“å±•æ€§è¾ƒå¥½ï¼</p>
<p>4.3 â˜˜ï¸å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰<br>å•ä¾‹å¯¹è±¡ï¼ˆSingletonï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚åœ¨Javaåº”ç”¨ä¸­ï¼Œå•ä¾‹å¯¹è±¡èƒ½ä¿è¯åœ¨ä¸€ä¸ªJVMä¸­ï¼Œè¯¥å¯¹è±¡åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ã€‚è¿™æ ·çš„æ¨¡å¼æœ‰å‡ ä¸ªå¥½å¤„ï¼š</p>
<p>1ã€æŸäº›ç±»åˆ›å»ºæ¯”è¾ƒé¢‘ç¹ï¼Œå¯¹äºä¸€äº›å¤§å‹çš„å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ç¬”å¾ˆå¤§çš„ç³»ç»Ÿå¼€é”€ã€‚<br>2ã€çœå»äº†newæ“ä½œç¬¦ï¼Œé™ä½äº†ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨é¢‘ç‡ï¼Œå‡è½»GCå‹åŠ›ã€‚<br>3ã€æœ‰äº›ç±»å¦‚äº¤æ˜“æ‰€çš„æ ¸å¿ƒäº¤æ˜“å¼•æ“ï¼Œæ§åˆ¶ç€äº¤æ˜“æµç¨‹ï¼Œå¦‚æœè¯¥ç±»å¯ä»¥åˆ›å»ºå¤šä¸ªçš„è¯ï¼Œç³»ç»Ÿå®Œå…¨ä¹±äº†ã€‚ï¼ˆæ¯”å¦‚ä¸€ä¸ªå†›é˜Ÿå‡ºç°äº†å¤šä¸ªå¸ä»¤å‘˜åŒæ—¶æŒ‡æŒ¥ï¼Œè‚¯å®šä¼šä¹±æˆä¸€å›¢ï¼‰ï¼Œæ‰€ä»¥åªæœ‰ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œæ‰èƒ½ä¿è¯æ ¸å¿ƒäº¤æ˜“æœåŠ¡å™¨ç‹¬ç«‹æ§åˆ¶æ•´ä¸ªæµç¨‹ã€‚<br>é¦–å…ˆæˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„å•ä¾‹ç±»ï¼š</p>
<p>public class Singleton { </p>
<p> /* æŒæœ‰ç§æœ‰é™æ€å®ä¾‹ï¼Œé˜²æ­¢è¢«å¼•ç”¨ï¼Œæ­¤å¤„èµ‹å€¼ä¸ºnullï¼Œç›®çš„æ˜¯å®ç°å»¶è¿ŸåŠ è½½ */<br> private static Singleton instance = null; </p>
<p> /* ç§æœ‰æ„é€ æ–¹æ³•ï¼Œé˜²æ­¢è¢«å®ä¾‹åŒ– */<br> private Singleton() {<br> } </p>
<p> /* é™æ€å·¥ç¨‹æ–¹æ³•ï¼Œåˆ›å»ºå®ä¾‹ */<br> public static Singleton getInstance() {<br>  if (instance == null) {<br>   instance = new Singleton();<br>  }<br>  return instance;<br> } </p>
<p> /* å¦‚æœè¯¥å¯¹è±¡è¢«ç”¨äºåºåˆ—åŒ–ï¼Œå¯ä»¥ä¿è¯å¯¹è±¡åœ¨åºåˆ—åŒ–å‰åä¿æŒä¸€è‡´ */<br> public Object readResolve() {<br>  return instance;<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>è¿™ä¸ªç±»å¯ä»¥æ»¡è¶³åŸºæœ¬è¦æ±‚ï¼Œä½†æ˜¯ï¼Œåƒè¿™æ ·æ¯«æ— çº¿ç¨‹å®‰å…¨ä¿æŠ¤çš„ç±»ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒæ”¾å…¥å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œè‚¯å®šå°±ä¼šå‡ºç°é—®é¢˜äº†ï¼Œå¦‚ä½•è§£å†³ï¼Ÿæˆ‘ä»¬é¦–å…ˆä¼šæƒ³åˆ°å¯¹getInstanceæ–¹æ³•åŠ synchronizedå…³é”®å­—ï¼Œå¦‚ä¸‹ï¼š</p>
<p>public static synchronized Singleton getInstance() {<br>  if (instance == null) {<br>   instance = new Singleton();<br>  }<br>  return instance;<br> }<br>1<br>2<br>3<br>4<br>5<br>6<br>ä½†æ˜¯ï¼Œsynchronizedå…³é”®å­—é”ä½çš„æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œè¿™æ ·çš„ç”¨æ³•ï¼Œåœ¨æ€§èƒ½ä¸Šä¼šæœ‰æ‰€ä¸‹é™ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨getInstance()ï¼Œéƒ½è¦å¯¹å¯¹è±¡ä¸Šé”ï¼Œäº‹å®ä¸Šï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡çš„æ—¶å€™éœ€è¦åŠ é”ï¼Œä¹‹åå°±ä¸éœ€è¦äº†ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªåœ°æ–¹éœ€è¦æ”¹è¿›ã€‚æˆ‘ä»¬æ”¹æˆä¸‹é¢è¿™ä¸ªï¼š</p>
<p>public static Singleton getInstance() {<br>  if (instance == null) {<br>   synchronized (instance) {<br>    if (instance == null) {<br>     instance = new Singleton();<br>    }<br>   }<br>  }<br>  return instance;<br> }<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>ä¼¼ä¹è§£å†³äº†ä¹‹å‰æåˆ°çš„é—®é¢˜ï¼Œå°†synchronizedå…³é”®å­—åŠ åœ¨äº†å†…éƒ¨ï¼Œä¹Ÿå°±æ˜¯è¯´å½“è°ƒç”¨çš„æ—¶å€™æ˜¯ä¸éœ€è¦åŠ é”çš„ï¼Œåªæœ‰åœ¨instanceä¸ºnullï¼Œå¹¶åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ‰éœ€è¦åŠ é”ï¼Œæ€§èƒ½æœ‰ä¸€å®šçš„æå‡ã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„æƒ…å†µï¼Œè¿˜æ˜¯æœ‰å¯èƒ½æœ‰é—®é¢˜çš„ï¼Œçœ‹ä¸‹é¢çš„æƒ…å†µï¼šåœ¨JavaæŒ‡ä»¤ä¸­åˆ›å»ºå¯¹è±¡å’Œèµ‹å€¼æ“ä½œæ˜¯åˆ†å¼€è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´instance = new Singleton();è¯­å¥æ˜¯åˆ†ä¸¤æ­¥æ‰§è¡Œçš„ã€‚ä½†æ˜¯JVMå¹¶ä¸ä¿è¯è¿™ä¸¤ä¸ªæ“ä½œçš„å…ˆåé¡ºåºï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰å¯èƒ½JVMä¼šä¸ºæ–°çš„Singletonå®ä¾‹åˆ†é…ç©ºé—´ï¼Œç„¶åç›´æ¥èµ‹å€¼ç»™instanceæˆå‘˜ï¼Œç„¶åå†å»åˆå§‹åŒ–è¿™ä¸ªSingletonå®ä¾‹ã€‚è¿™æ ·å°±å¯èƒ½å‡ºé”™äº†ï¼Œæˆ‘ä»¬ä»¥Aã€Bä¸¤ä¸ªçº¿ç¨‹ä¸ºä¾‹ï¼š<br>a&gt;Aã€Bçº¿ç¨‹åŒæ—¶è¿›å…¥äº†ç¬¬ä¸€ä¸ªifåˆ¤æ–­<br>b&gt;Aé¦–å…ˆè¿›å…¥synchronizedå—ï¼Œç”±äºinstanceä¸ºnullï¼Œæ‰€ä»¥å®ƒæ‰§è¡Œinstance = new Singleton();<br>c&gt;ç”±äºJVMå†…éƒ¨çš„ä¼˜åŒ–æœºåˆ¶ï¼ŒJVMå…ˆç”»å‡ºäº†ä¸€äº›åˆ†é…ç»™Singletonå®ä¾‹çš„ç©ºç™½å†…å­˜ï¼Œå¹¶èµ‹å€¼ç»™instanceæˆå‘˜ï¼ˆæ³¨æ„æ­¤æ—¶JVMæ²¡æœ‰å¼€å§‹åˆå§‹åŒ–è¿™ä¸ªå®ä¾‹ï¼‰ï¼Œç„¶åAç¦»å¼€äº†synchronizedå—ã€‚<br>d&gt;Bè¿›å…¥synchronizedå—ï¼Œç”±äºinstanceæ­¤æ—¶ä¸æ˜¯nullï¼Œå› æ­¤å®ƒé©¬ä¸Šç¦»å¼€äº†synchronizedå—å¹¶å°†ç»“æœè¿”å›ç»™è°ƒç”¨è¯¥æ–¹æ³•çš„ç¨‹åºã€‚<br>e&gt;æ­¤æ—¶Bçº¿ç¨‹æ‰“ç®—ä½¿ç”¨Singletonå®ä¾‹ï¼Œå´å‘ç°å®ƒæ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œäºæ˜¯é”™è¯¯å‘ç”Ÿäº†ã€‚<br>æ‰€ä»¥ç¨‹åºè¿˜æ˜¯æœ‰å¯èƒ½å‘ç”Ÿé”™è¯¯ï¼Œå…¶å®ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹æ˜¯å¾ˆå¤æ‚çš„ï¼Œä»è¿™ç‚¹æˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºï¼Œå°¤å…¶æ˜¯åœ¨å†™å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ç¨‹åºæ›´æœ‰éš¾åº¦ï¼Œæœ‰æŒ‘æˆ˜æ€§ã€‚æˆ‘ä»¬å¯¹è¯¥ç¨‹åºåšè¿›ä¸€æ­¥ä¼˜åŒ–ï¼š</p>
<p>private static class SingletonFactory{<br>  private static Singleton instance = new Singleton();<br> }<br> public static Singleton getInstance(){<br>  return SingletonFactory.instance;<br> }<br>1<br>2<br>3<br>4<br>5<br>6<br>å®é™…æƒ…å†µæ˜¯ï¼Œå•ä¾‹æ¨¡å¼ä½¿ç”¨å†…éƒ¨ç±»æ¥ç»´æŠ¤å•ä¾‹çš„å®ç°ï¼ŒJVMå†…éƒ¨çš„æœºåˆ¶èƒ½å¤Ÿä¿è¯å½“ä¸€ä¸ªç±»è¢«åŠ è½½çš„æ—¶å€™ï¼Œè¿™ä¸ªç±»çš„åŠ è½½è¿‡ç¨‹æ˜¯çº¿ç¨‹äº’æ–¥çš„ã€‚è¿™æ ·å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceçš„æ—¶å€™ï¼ŒJVMèƒ½å¤Ÿå¸®æˆ‘ä»¬ä¿è¯instanceåªè¢«åˆ›å»ºä¸€æ¬¡ï¼Œå¹¶ä¸”ä¼šä¿è¯æŠŠèµ‹å€¼ç»™instanceçš„å†…å­˜åˆå§‹åŒ–å®Œæ¯•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ‹…å¿ƒä¸Šé¢çš„é—®é¢˜ã€‚åŒæ—¶è¯¥æ–¹æ³•ä¹Ÿåªä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨äº’æ–¥æœºåˆ¶ï¼Œè¿™æ ·å°±è§£å†³äº†ä½æ€§èƒ½é—®é¢˜ã€‚è¿™æ ·æˆ‘ä»¬æš‚æ—¶æ€»ç»“ä¸€ä¸ªå®Œç¾çš„å•ä¾‹æ¨¡å¼ï¼š</p>
<p>public class Singleton { </p>
<p> /* ç§æœ‰æ„é€ æ–¹æ³•ï¼Œé˜²æ­¢è¢«å®ä¾‹åŒ– */<br> private Singleton() {<br> } </p>
<p> /* æ­¤å¤„ä½¿ç”¨ä¸€ä¸ªå†…éƒ¨ç±»æ¥ç»´æŠ¤å•ä¾‹ */<br> private static class SingletonFactory {<br>  private static Singleton instance = new Singleton();<br> } </p>
<p> /* è·å–å®ä¾‹ */<br> public static Singleton getInstance() {<br>  return SingletonFactory.instance;<br> } </p>
<p> /* å¦‚æœè¯¥å¯¹è±¡è¢«ç”¨äºåºåˆ—åŒ–ï¼Œå¯ä»¥ä¿è¯å¯¹è±¡åœ¨åºåˆ—åŒ–å‰åä¿æŒä¸€è‡´ */<br> public Object readResolve() {<br>  return getInstance();<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>å…¶å®è¯´å®ƒå®Œç¾ï¼Œä¹Ÿä¸ä¸€å®šï¼Œå¦‚æœåœ¨æ„é€ å‡½æ•°ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå®ä¾‹å°†æ°¸è¿œå¾—ä¸åˆ°åˆ›å»ºï¼Œä¹Ÿä¼šå‡ºé”™ã€‚æ‰€ä»¥è¯´ï¼Œååˆ†å®Œç¾çš„ä¸œè¥¿æ˜¯æ²¡æœ‰çš„ï¼Œæˆ‘ä»¬åªèƒ½æ ¹æ®å®é™…æƒ…å†µï¼Œé€‰æ‹©æœ€é€‚åˆè‡ªå·±åº”ç”¨åœºæ™¯çš„å®ç°æ–¹æ³•ã€‚ä¹Ÿæœ‰äººè¿™æ ·å®ç°ï¼šå› ä¸ºæˆ‘ä»¬åªéœ€è¦åœ¨åˆ›å»ºç±»çš„æ—¶å€™è¿›è¡ŒåŒæ­¥ï¼Œæ‰€ä»¥åªè¦å°†åˆ›å»ºå’ŒgetInstance()åˆ†å¼€ï¼Œå•ç‹¬ä¸ºåˆ›å»ºåŠ synchronizedå…³é”®å­—ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</p>
<p>public class SingletonTest { </p>
<p> private static SingletonTest instance = null; </p>
<p> private SingletonTest() {<br> }<br> private static synchronized void syncInit() {<br>  if (instance == null) {<br>   instance = new SingletonTest();<br>  }<br> }<br> public static SingletonTest getInstance() {<br>  if (instance == null) {<br>   syncInit();<br>  }<br>  return instance;<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>è€ƒè™‘æ€§èƒ½çš„è¯ï¼Œæ•´ä¸ªç¨‹åºåªéœ€åˆ›å»ºä¸€æ¬¡å®ä¾‹ï¼Œæ‰€ä»¥æ€§èƒ½ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå½±å“ã€‚</p>
<p>4.4 â˜˜ï¸å»ºé€ è€…æ¨¡å¼ï¼ˆBuilderï¼‰<br>å·¥å‚ç±»æ¨¡å¼æä¾›çš„æ˜¯åˆ›å»ºå•ä¸ªç±»çš„æ¨¡å¼ï¼Œè€Œå»ºé€ è€…æ¨¡å¼åˆ™æ˜¯å°†å„ç§äº§å“é›†ä¸­èµ·æ¥è¿›è¡Œç®¡ç†ï¼Œç”¨æ¥åˆ›å»ºå¤åˆå¯¹è±¡ï¼Œæ‰€è°“å¤åˆå¯¹è±¡å°±æ˜¯æŒ‡æŸä¸ªç±»å…·æœ‰ä¸åŒçš„å±æ€§ï¼Œå…¶å®å»ºé€ è€…æ¨¡å¼å°±æ˜¯å‰é¢æŠ½è±¡å·¥å‚æ¨¡å¼å’Œæœ€åçš„Testç»“åˆèµ·æ¥å¾—åˆ°çš„ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ï¼š<br>è¿˜å’Œå‰é¢ä¸€æ ·ï¼Œä¸€ä¸ªSenderæ¥å£ï¼Œä¸¤ä¸ªå®ç°ç±»MailSenderå’ŒSmsSenderã€‚æœ€åï¼Œå»ºé€ è€…ç±»å¦‚ä¸‹ï¼š</p>
<p>public class Builder { </p>
<p> private List<Sender> list = new ArrayList<Sender>(); </p>
<p> public void produceMailSender(int count){<br>  for(int i=0; i&lt;count; i++){<br>   list.add(new MailSender());<br>  }<br> } </p>
<p> public void produceSmsSender(int count){<br>  for(int i=0; i&lt;count; i++){<br>   list.add(new SmsSender());<br>  }<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class Test { </p>
<p> public static void main(String[] args) {<br>  Builder builder = new Builder();<br>  builder.produceMailSender(10);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>ä»è¿™ç‚¹çœ‹å‡ºï¼Œå»ºé€ è€…æ¨¡å¼å°†å¾ˆå¤šåŠŸèƒ½é›†æˆåˆ°ä¸€ä¸ªç±»é‡Œï¼Œè¿™ä¸ªç±»å¯ä»¥åˆ›é€ å‡ºæ¯”è¾ƒå¤æ‚çš„ä¸œè¥¿ã€‚æ‰€ä»¥ä¸å·¥ç¨‹æ¨¡å¼çš„åŒºåˆ«å°±æ˜¯ï¼šå·¥å‚æ¨¡å¼å…³æ³¨çš„æ˜¯åˆ›å»ºå•ä¸ªäº§å“ï¼Œè€Œå»ºé€ è€…æ¨¡å¼åˆ™å…³æ³¨åˆ›å»ºç¬¦åˆå¯¹è±¡ï¼Œå¤šä¸ªéƒ¨åˆ†ã€‚å› æ­¤ï¼Œæ˜¯é€‰æ‹©å·¥å‚æ¨¡å¼è¿˜æ˜¯å»ºé€ è€…æ¨¡å¼ï¼Œä¾å®é™…æƒ…å†µè€Œå®šã€‚</p>
<p>4.5 â˜˜ï¸åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰<br>åŸå‹æ¨¡å¼è™½ç„¶æ˜¯åˆ›å»ºå‹çš„æ¨¡å¼ï¼Œä½†æ˜¯ä¸å·¥å‚æ¨¡å¼æ²¡æœ‰å…³ç³»ï¼Œä»åå­—å³å¯çœ‹å‡ºï¼Œè¯¥æ¨¡å¼çš„æ€æƒ³å°±æ˜¯å°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹ï¼Œå¯¹å…¶è¿›è¡Œå¤åˆ¶ã€å…‹éš†ï¼Œäº§ç”Ÿä¸€ä¸ªå’ŒåŸå¯¹è±¡ç±»ä¼¼çš„æ–°å¯¹è±¡ã€‚æœ¬å°ç»“ä¼šé€šè¿‡å¯¹è±¡çš„å¤åˆ¶ï¼Œè¿›è¡Œè®²è§£ã€‚åœ¨Javaä¸­ï¼Œå¤åˆ¶å¯¹è±¡æ˜¯é€šè¿‡clone()å®ç°çš„ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªåŸå‹ç±»ï¼š</p>
<p>public class Prototype implements Cloneable { </p>
<p> public Object clone() throws CloneNotSupportedException {<br>  Prototype proto = (Prototype) super.clone();<br>  return proto;<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>å¾ˆç®€å•ï¼Œä¸€ä¸ªåŸå‹ç±»ï¼Œåªéœ€è¦å®ç°Cloneableæ¥å£ï¼Œè¦†å†™cloneæ–¹æ³•ï¼Œæ­¤å¤„cloneæ–¹æ³•å¯ä»¥æ”¹æˆä»»æ„çš„åç§°ï¼Œå› ä¸ºCloneableæ¥å£æ˜¯ä¸ªç©ºæ¥å£ï¼Œä½ å¯ä»¥ä»»æ„å®šä¹‰å®ç°ç±»çš„æ–¹æ³•åï¼Œå¦‚cloneAæˆ–è€…cloneBï¼Œå› ä¸ºæ­¤å¤„çš„é‡ç‚¹æ˜¯super.clone()è¿™å¥è¯ï¼Œsuper.clone()è°ƒç”¨çš„æ˜¯Objectçš„clone()æ–¹æ³•ï¼Œè€Œåœ¨Objectç±»ä¸­ï¼Œclone()æ˜¯nativeçš„ï¼Œå…·ä½“æ€ä¹ˆå®ç°ï¼Œæˆ‘ä¼šåœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œå…³äºè§£è¯»Javaä¸­æœ¬åœ°æ–¹æ³•çš„è°ƒç”¨ï¼Œæ­¤å¤„ä¸å†æ·±ç©¶ã€‚åœ¨è¿™å„¿ï¼Œæˆ‘å°†ç»“åˆå¯¹è±¡çš„æµ…å¤åˆ¶å’Œæ·±å¤åˆ¶æ¥è¯´ä¸€ä¸‹ï¼Œé¦–å…ˆéœ€è¦äº†è§£å¯¹è±¡æ·±ã€æµ…å¤åˆ¶çš„æ¦‚å¿µï¼š<br>æµ…å¤åˆ¶ï¼šå°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡éƒ½ä¼šé‡æ–°åˆ›å»ºï¼Œè€Œå¼•ç”¨ç±»å‹ï¼ŒæŒ‡å‘çš„è¿˜æ˜¯åŸå¯¹è±¡æ‰€æŒ‡å‘çš„ã€‚<br>æ·±å¤åˆ¶ï¼šå°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åï¼Œä¸è®ºæ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æœ‰å¼•ç”¨ç±»å‹ï¼Œéƒ½æ˜¯é‡æ–°åˆ›å»ºçš„ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ·±å¤åˆ¶è¿›è¡Œäº†å®Œå…¨å½»åº•çš„å¤åˆ¶ï¼Œè€Œæµ…å¤åˆ¶ä¸å½»åº•ã€‚<br>æ­¤å¤„ï¼Œå†™ä¸€ä¸ªæ·±æµ…å¤åˆ¶çš„ä¾‹å­ï¼š</p>
<p>public class Prototype implements Cloneable, Serializable { </p>
<p> private static final long serialVersionUID = 1L;<br> private String string; </p>
<p> private SerializableObject obj; </p>
<p> /* æµ…å¤åˆ¶ */<br> public Object clone() throws CloneNotSupportedException {<br>  Prototype proto = (Prototype) super.clone();<br>  return proto;<br> } </p>
<p> /* æ·±å¤åˆ¶ */<br> public Object deepClone() throws IOException, ClassNotFoundException { </p>
<p>  /* å†™å…¥å½“å‰å¯¹è±¡çš„äºŒè¿›åˆ¶æµ */<br>  ByteArrayOutputStream bos = new ByteArrayOutputStream();<br>  ObjectOutputStream oos = new ObjectOutputStream(bos);<br>  oos.writeObject(this); </p>
<p>  /* è¯»å‡ºäºŒè¿›åˆ¶æµäº§ç”Ÿçš„æ–°å¯¹è±¡ */<br>  ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());<br>  ObjectInputStream ois = new ObjectInputStream(bis);<br>  return ois.readObject();<br> } </p>
<p> public String getString() {<br>  return string;<br> } </p>
<p> public void setString(String string) {<br>  this.string = string;<br> } </p>
<p> public SerializableObject getObj() {<br>  return obj;<br> } </p>
<p> public void setObj(SerializableObject obj) {<br>  this.obj = obj;<br> } </p>
<p>} </p>
<p>class SerializableObject implements Serializable {<br> private static final long serialVersionUID = 1L;<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>è¦å®ç°æ·±å¤åˆ¶ï¼Œéœ€è¦é‡‡ç”¨æµçš„å½¢å¼è¯»å…¥å½“å‰å¯¹è±¡çš„äºŒè¿›åˆ¶è¾“å…¥ï¼Œå†å†™å‡ºäºŒè¿›åˆ¶æ•°æ®å¯¹åº”çš„å¯¹è±¡ã€‚</p>
<p>4.6 â˜˜ï¸é€‚é…å™¨æ¨¡å¼<br>æˆ‘å°†è®²ä¸‹7ç§ç»“æ„å‹æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼ã€è£…é¥°æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚å…¶ä¸­å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼æ˜¯å„ç§æ¨¡å¼çš„èµ·æºï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢çš„å›¾ï¼š</p>
<p>é€‚é…å™¨æ¨¡å¼å°†æŸä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£è¡¨ç¤ºï¼Œç›®çš„æ˜¯æ¶ˆé™¤ç”±äºæ¥å£ä¸åŒ¹é…æ‰€é€ æˆçš„ç±»çš„å…¼å®¹æ€§é—®é¢˜ã€‚ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šç±»çš„é€‚é…å™¨æ¨¡å¼ã€å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼ã€æ¥å£çš„é€‚é…å™¨æ¨¡å¼ã€‚</p>
<p>4.6.1 ğŸŒ¿å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç±»çš„é€‚é…å™¨æ¨¡å¼ï¼Œå…ˆçœ‹ç±»å›¾ï¼š</p>
<p>æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼šæœ‰ä¸€ä¸ªSourceç±»ï¼Œæ‹¥æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¾…é€‚é…ï¼Œç›®æ ‡æ¥å£æ—¶Targetableï¼Œé€šè¿‡Adapterç±»ï¼Œå°†Sourceçš„åŠŸèƒ½æ‰©å±•åˆ°Targetableé‡Œï¼Œçœ‹ä»£ç ï¼š</p>
<p>public class Source { </p>
<p> public void method1() {<br>  System.out.println(â€œthis is original method!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>public interface Targetable { </p>
<p> /* ä¸åŸç±»ä¸­çš„æ–¹æ³•ç›¸åŒ */<br> public void method1(); </p>
<p> /* æ–°ç±»çš„æ–¹æ³• */<br> public void method2();<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>public class Adapter extends Source implements Targetable { </p>
<p> @Override<br> public void method2() {<br>  System.out.println(â€œthis is the targetable method!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>Adapterç±»ç»§æ‰¿Sourceç±»ï¼Œå®ç°Targetableæ¥å£ï¼Œä¸‹é¢æ˜¯æµ‹è¯•ç±»ï¼š</p>
<p>public class AdapterTest { </p>
<p> public static void main(String[] args) {<br>  Targetable target = new Adapter();<br>  target.method1();<br>  target.method2();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>è¾“å‡ºï¼š<br>this is original method!<br>this is the targetable method!<br>è¿™æ ·Targetableæ¥å£çš„å®ç°ç±»å°±å…·æœ‰äº†Sourceç±»çš„åŠŸèƒ½ã€‚</p>
<p>4.6.2 ğŸŒ¿å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼</p>
<p>åŸºæœ¬æ€è·¯å’Œç±»çš„é€‚é…å™¨æ¨¡å¼ç›¸åŒï¼Œåªæ˜¯å°†Adapterç±»ä½œä¿®æ”¹ï¼Œè¿™æ¬¡ä¸ç»§æ‰¿Sourceç±»ï¼Œè€Œæ˜¯æŒæœ‰Sourceç±»çš„å®ä¾‹ï¼Œä»¥è¾¾åˆ°è§£å†³å…¼å®¹æ€§çš„é—®é¢˜ã€‚çœ‹å›¾ï¼š</p>
<p>åªéœ€è¦ä¿®æ”¹Adapterç±»çš„æºç å³å¯ï¼š</p>
<p>public class Wrapper implements Targetable { </p>
<p> private Source source; </p>
<p> public Wrapper(Source source){<br>  super();<br>  this.source = source;<br> }<br> @Override<br> public void method2() {<br>  System.out.println(â€œthis is the targetable method!â€);<br> } </p>
<p> @Override<br> public void method1() {<br>  source.method1();<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class AdapterTest { </p>
<p> public static void main(String[] args) {<br>  Source source = new Source();<br>  Targetable target = new Wrapper(source);<br>  target.method1();<br>  target.method2();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>è¾“å‡ºä¸ç¬¬ä¸€ç§ä¸€æ ·ï¼Œåªæ˜¯é€‚é…çš„æ–¹æ³•ä¸åŒè€Œå·²ã€‚</p>
<p>4.6.3 ğŸŒ¿æ¥å£çš„é€‚é…å™¨æ¨¡å¼</p>
<p>æœ‰æ—¶æˆ‘ä»¬å†™çš„ä¸€ä¸ªæ¥å£ä¸­æœ‰å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå½“æˆ‘ä»¬å†™è¯¥æ¥å£çš„å®ç°ç±»æ—¶ï¼Œå¿…é¡»å®ç°è¯¥æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œè¿™æ˜æ˜¾æœ‰æ—¶æ¯”è¾ƒæµªè´¹ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œæœ‰æ—¶åªéœ€è¦æŸä¸€äº›ï¼Œæ­¤å¤„ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ¥å£çš„é€‚é…å™¨æ¨¡å¼ï¼Œå€ŸåŠ©äºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¯¥æŠ½è±¡ç±»å®ç°äº†è¯¥æ¥å£ï¼Œå®ç°äº†æ‰€æœ‰çš„æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬ä¸å’ŒåŸå§‹çš„æ¥å£æ‰“äº¤é“ï¼Œåªå’Œè¯¥æŠ½è±¡ç±»å–å¾—è”ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ªç±»ï¼Œç»§æ‰¿è¯¥æŠ½è±¡ç±»ï¼Œé‡å†™æˆ‘ä»¬éœ€è¦çš„æ–¹æ³•å°±è¡Œã€‚çœ‹ä¸€ä¸‹ç±»å›¾ï¼š</p>
<p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¸¸ä¼šé‡åˆ°è¿™ç§æ¥å£ä¸­å®šä¹‰äº†å¤ªå¤šçš„æ–¹æ³•ï¼Œä»¥è‡´äºæœ‰æ—¶æˆ‘ä»¬åœ¨ä¸€äº›å®ç°ç±»ä¸­å¹¶ä¸æ˜¯éƒ½éœ€è¦ã€‚çœ‹ä»£ç ï¼š</p>
<p>public interface Sourceable { </p>
<p> public void method1();<br> public void method2();<br>}<br>1<br>2<br>3<br>4<br>5<br>æŠ½è±¡ç±»Wrapper2ï¼š</p>
<p>public abstract class Wrapper2 implements Sourceable{ </p>
<p> public void method1(){}<br> public void method2(){}<br>}<br>1<br>2<br>3<br>4<br>5<br>public class SourceSub1 extends Wrapper2 {<br> public void method1(){<br>  System.out.println(â€œthe sourceable interfaceâ€™s first Sub1!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>public class SourceSub2 extends Wrapper2 {<br> public void method2(){<br>  System.out.println(â€œthe sourceable interfaceâ€™s second Sub2!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>public class WrapperTest { </p>
<p> public static void main(String[] args) {<br>  Sourceable source1 = new SourceSub1();<br>  Sourceable source2 = new SourceSub2(); </p>
<p>  source1.method1();<br>  source1.method2();<br>  source2.method1();<br>  source2.method2();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>æµ‹è¯•è¾“å‡ºï¼š<br>the sourceable interfaceâ€™s first Sub1!<br>the sourceable interfaceâ€™s second Sub2!<br>è¾¾åˆ°äº†æˆ‘ä»¬çš„æ•ˆæœï¼<br>è®²äº†è¿™ä¹ˆå¤šï¼Œæ€»ç»“ä¸€ä¸‹ä¸‰ç§é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š<br>ç±»çš„é€‚é…å™¨æ¨¡å¼ï¼šå½“å¸Œæœ›å°†ä¸€ä¸ªç±»è½¬æ¢æˆæ»¡è¶³å¦ä¸€ä¸ªæ–°æ¥å£çš„ç±»æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç±»çš„é€‚é…å™¨æ¨¡å¼ï¼Œåˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼Œç»§æ‰¿åŸæœ‰çš„ç±»ï¼Œå®ç°æ–°çš„æ¥å£å³å¯ã€‚<br>å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼ï¼šå½“å¸Œæœ›å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆæ»¡è¶³å¦ä¸€ä¸ªæ–°æ¥å£çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªWrapperç±»ï¼ŒæŒæœ‰åŸç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œåœ¨Wrapperç±»çš„æ–¹æ³•ä¸­ï¼Œè°ƒç”¨å®ä¾‹çš„æ–¹æ³•å°±è¡Œã€‚<br>æ¥å£çš„é€‚é…å™¨æ¨¡å¼ï¼šå½“ä¸å¸Œæœ›å®ç°ä¸€ä¸ªæ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»Wrapperï¼Œå®ç°æ‰€æœ‰æ–¹æ³•ï¼Œæˆ‘ä»¬å†™åˆ«çš„ç±»çš„æ—¶å€™ï¼Œç»§æ‰¿æŠ½è±¡ç±»å³å¯ã€‚</p>
<p>4.7 â˜˜ï¸è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰<br>è£…é¥°æ¨¡å¼å°±æ˜¯ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œè€Œä¸”æ˜¯åŠ¨æ€çš„ï¼Œè¦æ±‚è£…é¥°å¯¹è±¡å’Œè¢«è£…é¥°å¯¹è±¡å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œè£…é¥°å¯¹è±¡æŒæœ‰è¢«è£…é¥°å¯¹è±¡çš„å®ä¾‹ï¼Œå…³ç³»å›¾å¦‚ä¸‹ï¼š</p>
<p>Sourceç±»æ˜¯è¢«è£…é¥°ç±»ï¼ŒDecoratorç±»æ˜¯ä¸€ä¸ªè£…é¥°ç±»ï¼Œå¯ä»¥ä¸ºSourceç±»åŠ¨æ€çš„æ·»åŠ ä¸€äº›åŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p>public interface Sourceable {<br> public void method();<br>}<br>1<br>2<br>3<br>public class Source implements Sourceable { </p>
<p> @Override<br> public void method() {<br>  System.out.println(â€œthe original method!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>public class Decorator implements Sourceable { </p>
<p> private Sourceable source; </p>
<p> public Decorator(Sourceable source){<br>  super();<br>  this.source = source;<br> }<br> @Override<br> public void method() {<br>  System.out.println(â€œbefore decorator!â€);<br>  source.method();<br>  System.out.println(â€œafter decorator!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class DecoratorTest { </p>
<p> public static void main(String[] args) {<br>  Sourceable source = new Source();<br>  Sourceable obj = new Decorator(source);<br>  obj.method();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>è¾“å‡ºï¼š<br>before decorator!<br>the original method!<br>after decorator!<br>è£…é¥°å™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š<br>1ã€éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚<br>2ã€åŠ¨æ€çš„ä¸ºä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œè€Œä¸”è¿˜èƒ½åŠ¨æ€æ’¤é”€ã€‚ï¼ˆç»§æ‰¿ä¸èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œç»§æ‰¿çš„åŠŸèƒ½æ˜¯é™æ€çš„ï¼Œä¸èƒ½åŠ¨æ€å¢åˆ ã€‚ï¼‰<br>ç¼ºç‚¹ï¼šäº§ç”Ÿè¿‡å¤šç›¸ä¼¼çš„å¯¹è±¡ï¼Œä¸æ˜“æ’é”™ï¼</p>
<p>4.8 â˜˜ï¸ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰<br>å…¶å®æ¯ä¸ªæ¨¡å¼åç§°å°±è¡¨æ˜äº†è¯¥æ¨¡å¼çš„ä½œç”¨ï¼Œä»£ç†æ¨¡å¼å°±æ˜¯å¤šä¸€ä¸ªä»£ç†ç±»å‡ºæ¥ï¼Œæ›¿åŸå¯¹è±¡è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ç§Ÿæˆ¿å­çš„æ—¶å€™å›å»æ‰¾ä¸­ä»‹ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºä½ å¯¹è¯¥åœ°åŒºæˆ¿å±‹çš„ä¿¡æ¯æŒæ¡çš„ä¸å¤Ÿå…¨é¢ï¼Œå¸Œæœ›æ‰¾ä¸€ä¸ªæ›´ç†Ÿæ‚‰çš„äººå»å¸®ä½ åšï¼Œæ­¤å¤„çš„ä»£ç†å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚å†å¦‚æˆ‘ä»¬æœ‰çš„æ—¶å€™æ‰“å®˜å¸ï¼Œæˆ‘ä»¬éœ€è¦è¯·å¾‹å¸ˆï¼Œå› ä¸ºå¾‹å¸ˆåœ¨æ³•å¾‹æ–¹é¢æœ‰ä¸“é•¿ï¼Œå¯ä»¥æ›¿æˆ‘ä»¬è¿›è¡Œæ“ä½œï¼Œè¡¨è¾¾æˆ‘ä»¬çš„æƒ³æ³•ã€‚å…ˆæ¥çœ‹çœ‹å…³ç³»å›¾ï¼š</p>
<p>æ ¹æ®ä¸Šæ–‡çš„é˜è¿°ï¼Œä»£ç†æ¨¡å¼å°±æ¯”è¾ƒå®¹æ˜“çš„ç†è§£äº†ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä»£ç ï¼š</p>
<p>public interface Sourceable {<br> public void method();<br>}<br>1<br>2<br>3<br>public class Source implements Sourceable { </p>
<p> @Override<br> public void method() {<br>  System.out.println(â€œthe original method!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>public class Proxy implements Sourceable { </p>
<p> private Source source;<br> public Proxy(){<br>  super();<br>  this.source = new Source();<br> }<br> @Override<br> public void method() {<br>  before();<br>  source.method();<br>  atfer();<br> }<br> private void atfer() {<br>  System.out.println(â€œafter proxy!â€);<br> }<br> private void before() {<br>  System.out.println(â€œbefore proxy!â€);<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class ProxyTest { </p>
<p> public static void main(String[] args) {<br>  Sourceable source = new Proxy();<br>  source.method();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>è¾“å‡ºï¼š<br>before proxy!<br>the original method!<br>after proxy!<br>ä»£ç†æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š<br>å¦‚æœå·²æœ‰çš„æ–¹æ³•åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦å¯¹åŸæœ‰çš„æ–¹æ³•è¿›è¡Œæ”¹è¿›ï¼Œæ­¤æ—¶æœ‰ä¸¤ç§åŠæ³•ï¼š<br>1ã€ä¿®æ”¹åŸæœ‰çš„æ–¹æ³•æ¥é€‚åº”ã€‚è¿™æ ·è¿åäº†â€œå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­â€çš„åŸåˆ™ã€‚<br>2ã€å°±æ˜¯é‡‡ç”¨ä¸€ä¸ªä»£ç†ç±»è°ƒç”¨åŸæœ‰çš„æ–¹æ³•ï¼Œä¸”å¯¹äº§ç”Ÿçš„ç»“æœè¿›è¡Œæ§åˆ¶ã€‚è¿™ç§æ–¹æ³•å°±æ˜¯ä»£ç†æ¨¡å¼ã€‚<br>ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œå¯ä»¥å°†åŠŸèƒ½åˆ’åˆ†çš„æ›´åŠ æ¸…æ™°ï¼Œæœ‰åŠ©äºåæœŸç»´æŠ¤ï¼</p>
<p>4.9 â˜˜ï¸å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰<br>å¤–è§‚æ¨¡å¼æ˜¯ä¸ºäº†è§£å†³ç±»ä¸ç±»ä¹‹å®¶çš„ä¾èµ–å…³ç³»çš„ï¼Œåƒspringä¸€æ ·ï¼Œå¯ä»¥å°†ç±»å’Œç±»ä¹‹é—´çš„å…³ç³»é…ç½®åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œè€Œå¤–è§‚æ¨¡å¼å°±æ˜¯å°†ä»–ä»¬çš„å…³ç³»æ”¾åœ¨ä¸€ä¸ªFacadeç±»ä¸­ï¼Œé™ä½äº†ç±»ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œè¯¥æ¨¡å¼ä¸­æ²¡æœ‰æ¶‰åŠåˆ°æ¥å£ï¼Œçœ‹ä¸‹ç±»å›¾ï¼šï¼ˆæˆ‘ä»¬ä»¥ä¸€ä¸ªè®¡ç®—æœºçš„å¯åŠ¨è¿‡ç¨‹ä¸ºä¾‹ï¼‰</p>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸‹å®ç°ç±»ï¼š</p>
<p>public class CPU { </p>
<p> public void startup(){<br>  System.out.println(â€œcpu startup!â€);<br> } </p>
<p> public void shutdown(){<br>  System.out.println(â€œcpu shutdown!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>public class Memory { </p>
<p> public void startup(){<br>  System.out.println(â€œmemory startup!â€);<br> } </p>
<p> public void shutdown(){<br>  System.out.println(â€œmemory shutdown!â€);<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>public class Disk { </p>
<p> public void startup(){<br>  System.out.println(â€œdisk startup!â€);<br> } </p>
<p> public void shutdown(){<br>  System.out.println(â€œdisk shutdown!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>public class Computer {<br> private CPU cpu;<br> private Memory memory;<br> private Disk disk; </p>
<p> public Computer(){<br>  cpu = new CPU();<br>  memory = new Memory();<br>  disk = new Disk();<br> } </p>
<p> public void startup(){<br>  System.out.println(â€œstart the computer!â€);<br>  cpu.startup();<br>  memory.startup();<br>  disk.startup();<br>  System.out.println(â€œstart computer finished!â€);<br> } </p>
<p> public void shutdown(){<br>  System.out.println(â€œbegin to close the computer!â€);<br>  cpu.shutdown();<br>  memory.shutdown();<br>  disk.shutdown();<br>  System.out.println(â€œcomputer closed!â€);<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>Userç±»å¦‚ä¸‹ï¼š</p>
<p>public class User { </p>
<p> public static void main(String[] args) {<br>  Computer computer = new Computer();<br>  computer.startup();<br>  computer.shutdown();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>è¾“å‡ºï¼š<br>start the computer!<br>cpu startup!<br>memory startup!<br>disk startup!<br>start computer finished!<br>begin to close the computer!<br>cpu shutdown!<br>memory shutdown!<br>disk shutdown!<br>computer closed!<br>å¦‚æœæˆ‘ä»¬æ²¡æœ‰Computerç±»ï¼Œé‚£ä¹ˆï¼ŒCPUã€Memoryã€Diskä»–ä»¬ä¹‹é—´å°†ä¼šç›¸äº’æŒæœ‰å®ä¾‹ï¼Œäº§ç”Ÿå…³ç³»ï¼Œè¿™æ ·ä¼šé€ æˆä¸¥é‡çš„ä¾èµ–ï¼Œä¿®æ”¹ä¸€ä¸ªç±»ï¼Œå¯èƒ½ä¼šå¸¦æ¥å…¶ä»–ç±»çš„ä¿®æ”¹ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çœ‹åˆ°çš„ï¼Œæœ‰äº†Computerç±»ï¼Œä»–ä»¬ä¹‹é—´çš„å…³ç³»è¢«æ”¾åœ¨äº†Computerç±»é‡Œï¼Œè¿™æ ·å°±èµ·åˆ°äº†è§£è€¦çš„ä½œç”¨ï¼Œè¿™ï¼Œå°±æ˜¯å¤–è§‚æ¨¡å¼ï¼</p>
<p>4.10 â˜˜ï¸æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰<br>æ¡¥æ¥æ¨¡å¼å°±æ˜¯æŠŠäº‹ç‰©å’Œå…¶å…·ä½“å®ç°åˆ†å¼€ï¼Œä½¿ä»–ä»¬å¯ä»¥å„è‡ªç‹¬ç«‹çš„å˜åŒ–ã€‚æ¡¥æ¥çš„ç”¨æ„æ˜¯ï¼šå°†æŠ½è±¡åŒ–ä¸å®ç°åŒ–è§£è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œåƒæˆ‘ä»¬å¸¸ç”¨çš„JDBCæ¡¥DriverManagerä¸€æ ·ï¼ŒJDBCè¿›è¡Œè¿æ¥æ•°æ®åº“çš„æ—¶å€™ï¼Œåœ¨å„ä¸ªæ•°æ®åº“ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼ŒåŸºæœ¬ä¸éœ€è¦åŠ¨å¤ªå¤šçš„ä»£ç ï¼Œç”šè‡³ä¸æ¯«ä¸ç”¨åŠ¨ï¼ŒåŸå› å°±æ˜¯JDBCæä¾›ç»Ÿä¸€æ¥å£ï¼Œæ¯ä¸ªæ•°æ®åº“æä¾›å„è‡ªçš„å®ç°ï¼Œç”¨ä¸€ä¸ªå«åšæ•°æ®åº“é©±åŠ¨çš„ç¨‹åºæ¥æ¡¥æ¥å°±è¡Œäº†ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å…³ç³»å›¾ï¼š</p>
<p>å®ç°ä»£ç ï¼š<br>å…ˆå®šä¹‰æ¥å£ï¼š</p>
<p>public interface Sourceable {<br> public void method();<br>}<br>1<br>2<br>3<br>åˆ†åˆ«å®šä¹‰ä¸¤ä¸ªå®ç°ç±»ï¼š</p>
<p>public class SourceSub1 implements Sourceable { </p>
<p> @Override<br> public void method() {<br>  System.out.println(â€œthis is the first sub!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>public class SourceSub2 implements Sourceable { </p>
<p> @Override<br> public void method() {<br>  System.out.println(â€œthis is the second sub!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>å®šä¹‰ä¸€ä¸ªæ¡¥ï¼ŒæŒæœ‰Sourceableçš„ä¸€ä¸ªå®ä¾‹ï¼š</p>
<p>public abstract class Bridge {<br> private Sourceable source; </p>
<p> public void method(){<br>  source.method();<br> } </p>
<p> public Sourceable getSource() {<br>  return source;<br> } </p>
<p> public void setSource(Sourceable source) {<br>  this.source = source;<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>public class MyBridge extends Bridge {<br> public void method(){<br>  getSource().method();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class BridgeTest { </p>
<p> public static void main(String[] args) { </p>
<p>  Bridge bridge = new MyBridge(); </p>
<p>  /<em>è°ƒç”¨ç¬¬ä¸€ä¸ªå¯¹è±¡</em>/<br>  Sourceable source1 = new SourceSub1();<br>  bridge.setSource(source1);<br>  bridge.method(); </p>
<p>  /<em>è°ƒç”¨ç¬¬äºŒä¸ªå¯¹è±¡</em>/<br>  Sourceable source2 = new SourceSub2();<br>  bridge.setSource(source2);<br>  bridge.method();<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>outputï¼š<br>this is the first sub!<br>this is the second sub!</p>
<p>è¿™æ ·ï¼Œå°±é€šè¿‡å¯¹Bridgeç±»çš„è°ƒç”¨ï¼Œå®ç°äº†å¯¹æ¥å£Sourceableçš„å®ç°ç±»SourceSub1å’ŒSourceSub2çš„è°ƒç”¨ã€‚æ¥ä¸‹æ¥æˆ‘å†ç”»ä¸ªå›¾ï¼Œå¤§å®¶å°±åº”è¯¥æ˜ç™½äº†ï¼Œå› ä¸ºè¿™ä¸ªå›¾æ˜¯æˆ‘ä»¬JDBCè¿æ¥çš„åŸç†ï¼Œæœ‰æ•°æ®åº“å­¦ä¹ åŸºç¡€çš„ï¼Œä¸€ç»“åˆå°±éƒ½æ‡‚äº†ã€‚</p>
<p>4.11 â˜˜ï¸ç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰<br>ç»„åˆæ¨¡å¼æœ‰æ—¶åˆå«éƒ¨åˆ†-æ•´ä½“æ¨¡å¼åœ¨å¤„ç†ç±»ä¼¼æ ‘å½¢ç»“æ„çš„é—®é¢˜æ—¶æ¯”è¾ƒæ–¹ä¾¿ï¼Œçœ‹çœ‹å…³ç³»å›¾ï¼š</p>
<p>public class TreeNode { </p>
<p> private String name;<br> private TreeNode parent;<br> private Vector<TreeNode> children = new Vector<TreeNode>(); </p>
<p> public TreeNode(String name){<br>  this.name = name;<br> } </p>
<p> public String getName() {<br>  return name;<br> } </p>
<p> public void setName(String name) {<br>  this.name = name;<br> } </p>
<p> public TreeNode getParent() {<br>  return parent;<br> } </p>
<p> public void setParent(TreeNode parent) {<br>  this.parent = parent;<br> } </p>
<p> //æ·»åŠ å­©å­èŠ‚ç‚¹<br> public void add(TreeNode node){<br>  children.add(node);<br> } </p>
<p> //åˆ é™¤å­©å­èŠ‚ç‚¹<br> public void remove(TreeNode node){<br>  children.remove(node);<br> } </p>
<p> //å–å¾—å­©å­èŠ‚ç‚¹<br> public Enumeration<TreeNode> getChildren(){<br>  return children.elements();<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>public class Tree { </p>
<p> TreeNode root = null; </p>
<p> public Tree(String name) {<br>  root = new TreeNode(name);<br> } </p>
<p> public static void main(String[] args) {<br>  Tree tree = new Tree(â€œAâ€);<br>  TreeNode nodeB = new TreeNode(â€œBâ€);<br>  TreeNode nodeC = new TreeNode(â€œCâ€); </p>
<p>  nodeB.add(nodeC);<br>  tree.root.add(nodeB);<br>  System.out.println(â€œbuild the tree finished!â€);<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>4.12 â˜˜ï¸äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰<br>äº«å…ƒæ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯å®ç°å¯¹è±¡çš„å…±äº«ï¼Œå³å…±äº«æ± ï¼Œå½“ç³»ç»Ÿä¸­å¯¹è±¡å¤šçš„æ—¶å€™å¯ä»¥å‡å°‘å†…å­˜çš„å¼€é”€ï¼Œé€šå¸¸ä¸å·¥å‚æ¨¡å¼ä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>FlyWeightFactoryè´Ÿè´£åˆ›å»ºå’Œç®¡ç†äº«å…ƒå•å…ƒï¼Œå½“ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œå·¥å‚éœ€è¦æ£€æŸ¥å½“å‰å¯¹è±¡æ± ä¸­æ˜¯å¦æœ‰ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡ï¼Œå¦‚æœæœ‰ï¼Œå°±è¿”å›å·²ç»å­˜åœ¨çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ŒFlyWeightæ˜¯è¶…ç±»ã€‚ä¸€æåˆ°å…±äº«æ± ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“è”æƒ³åˆ°Javaé‡Œé¢çš„JDBCè¿æ¥æ± ï¼Œæƒ³æƒ³æ¯ä¸ªè¿æ¥çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬ä¸éš¾æ€»ç»“å‡ºï¼šé€‚ç”¨äºä½œå…±äº«çš„ä¸€äº›ä¸ªå¯¹è±¡ï¼Œä»–ä»¬æœ‰ä¸€äº›å…±æœ‰çš„å±æ€§ï¼Œå°±æ‹¿æ•°æ®åº“è¿æ¥æ± æ¥è¯´ï¼Œurlã€driverClassNameã€usernameã€passwordåŠdbnameï¼Œè¿™äº›å±æ€§å¯¹äºæ¯ä¸ªè¿æ¥æ¥è¯´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å°±é€‚åˆç”¨äº«å…ƒæ¨¡å¼æ¥å¤„ç†ï¼Œå»ºä¸€ä¸ªå·¥å‚ç±»ï¼Œå°†ä¸Šè¿°ç±»ä¼¼å±æ€§ä½œä¸ºå†…éƒ¨æ•°æ®ï¼Œå…¶å®ƒçš„ä½œä¸ºå¤–éƒ¨æ•°æ®ï¼Œåœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå½“åšå‚æ•°ä¼ è¿›æ¥ï¼Œè¿™æ ·å°±èŠ‚çœäº†ç©ºé—´ï¼Œå‡å°‘äº†å®ä¾‹çš„æ•°é‡ã€‚<br>çœ‹ä¸ªä¾‹å­ï¼š</p>
<p>çœ‹ä¸‹æ•°æ®åº“è¿æ¥æ± çš„ä»£ç ï¼š</p>
<p>public class ConnectionPool { </p>
<p> private Vector<Connection> pool; </p>
<p> /<em>å…¬æœ‰å±æ€§</em>/<br> private String url = â€œjdbc:mysql://localhost:3306/testâ€;<br> private String username = â€œrootâ€;<br> private String password = â€œrootâ€;<br> private String driverClassName = â€œcom.mysql.jdbc.Driverâ€; </p>
<p> private int poolSize = 100;<br> private static ConnectionPool instance = null;<br> Connection conn = null; </p>
<p> /<em>æ„é€ æ–¹æ³•ï¼Œåšä¸€äº›åˆå§‹åŒ–å·¥ä½œ</em>/<br> private ConnectionPool() {<br>  pool = new Vector<Connection>(poolSize); </p>
<p>  for (int i = 0; i &lt; poolSize; i++) {<br>   try {<br>    Class.forName(driverClassName);<br>    conn = DriverManager.getConnection(url, username, password);<br>    pool.add(conn);<br>   } catch (ClassNotFoundException e) {<br>    e.printStackTrace();<br>   } catch (SQLException e) {<br>    e.printStackTrace();<br>   }<br>  }<br> } </p>
<p> /* è¿”å›è¿æ¥åˆ°è¿æ¥æ±  */<br> public synchronized void release() {<br>  pool.add(conn);<br> } </p>
<p> /* è¿”å›è¿æ¥æ± ä¸­çš„ä¸€ä¸ªæ•°æ®åº“è¿æ¥ */<br> public synchronized Connection getConnection() {<br>  if (pool.size() &gt; 0) {<br>   Connection conn = pool.get(0);<br>   pool.remove(conn);<br>   return conn;<br>  } else {<br>   return null;<br>  }<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>é€šè¿‡è¿æ¥æ± çš„ç®¡ç†ï¼Œå®ç°äº†æ•°æ®åº“è¿æ¥çš„å…±äº«ï¼Œä¸éœ€è¦æ¯ä¸€æ¬¡éƒ½é‡æ–°åˆ›å»ºè¿æ¥ï¼ŒèŠ‚çœäº†æ•°æ®åº“é‡æ–°åˆ›å»ºçš„å¼€é”€ï¼Œæå‡äº†ç³»ç»Ÿçš„æ€§èƒ½ï¼</p>
<p>4.13 â˜˜ï¸ç­–ç•¥æ¨¡å¼ï¼ˆstrategyï¼‰<br>ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä¸”ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚éœ€è¦è®¾è®¡ä¸€ä¸ªæ¥å£ï¼Œä¸ºä¸€ç³»åˆ—å®ç°ç±»æä¾›ç»Ÿä¸€çš„æ–¹æ³•ï¼Œå¤šä¸ªå®ç°ç±»å®ç°è¯¥æ¥å£ï¼Œè®¾è®¡ä¸€ä¸ªæŠ½è±¡ç±»ï¼ˆå¯æœ‰å¯æ— ï¼Œå±äºè¾…åŠ©ç±»ï¼‰ï¼Œæä¾›è¾…åŠ©å‡½æ•°ï¼Œå…³ç³»å›¾å¦‚ä¸‹ï¼š</p>
<p>å›¾ä¸­ICalculatoræä¾›åŒæ„çš„æ–¹æ³•ï¼Œ<br>AbstractCalculatoræ˜¯è¾…åŠ©ç±»ï¼Œæä¾›è¾…åŠ©æ–¹æ³•ï¼Œæ¥ä¸‹æ¥ï¼Œä¾æ¬¡å®ç°ä¸‹æ¯ä¸ªç±»ï¼š<br>é¦–å…ˆç»Ÿä¸€æ¥å£ï¼š</p>
<p>public interface ICalculator {<br> public int calculate(String exp);<br>}<br>1<br>2<br>3<br>è¾…åŠ©ç±»ï¼š</p>
<p>public abstract class AbstractCalculator { </p>
<p> public int[] split(String exp,String opt){<br>  String array[] = exp.split(opt);<br>  int arrayInt[] = new int[2];<br>  arrayInt[0] = Integer.parseInt(array[0]);<br>  arrayInt[1] = Integer.parseInt(array[1]);<br>  return arrayInt;<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>ä¸‰ä¸ªå®ç°ç±»ï¼š</p>
<p>public class Plus extends AbstractCalculator implements ICalculator { </p>
<p> @Override<br> public int calculate(String exp) {<br>  int arrayInt[] = split(exp,â€\+â€);<br>  return arrayInt[0]+arrayInt[1];<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>public class Minus extends AbstractCalculator implements ICalculator { </p>
<p> @Override<br> public int calculate(String exp) {<br>  int arrayInt[] = split(exp,â€-â€œ);<br>  return arrayInt[0]-arrayInt[1];<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>public class Multiply extends AbstractCalculator implements ICalculator { </p>
<p> @Override<br> public int calculate(String exp) {<br>  int arrayInt[] = split(exp,â€\*â€);<br>  return arrayInt[0]*arrayInt[1];<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>ç®€å•çš„æµ‹è¯•ç±»ï¼š</p>
<p>public class StrategyTest { </p>
<p> public static void main(String[] args) {<br>  String exp = â€œ2+8â€;<br>  ICalculator cal = new Plus();<br>  int result = cal.calculate(exp);<br>  System.out.println(result);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>è¾“å‡ºï¼š10<br>ç­–ç•¥æ¨¡å¼çš„å†³å®šæƒåœ¨ç”¨æˆ·ï¼Œç³»ç»Ÿæœ¬èº«æä¾›ä¸åŒç®—æ³•çš„å®ç°ï¼Œæ–°å¢æˆ–è€…åˆ é™¤ç®—æ³•ï¼Œå¯¹å„ç§ç®—æ³•åšå°è£…ã€‚å› æ­¤ï¼Œç­–ç•¥æ¨¡å¼å¤šç”¨åœ¨ç®—æ³•å†³ç­–ç³»ç»Ÿä¸­ï¼Œå¤–éƒ¨ç”¨æˆ·åªéœ€è¦å†³å®šç”¨å“ªä¸ªç®—æ³•å³å¯ã€‚</p>
<p>4.14 â˜˜ï¸æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰<br>è§£é‡Šä¸€ä¸‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå°±æ˜¯æŒ‡ï¼šä¸€ä¸ªæŠ½è±¡ç±»ä¸­ï¼Œæœ‰ä¸€ä¸ªä¸»æ–¹æ³•ï¼Œå†å®šä¹‰1â€¦nä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ˜¯æŠ½è±¡çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å®é™…çš„æ–¹æ³•ï¼Œå®šä¹‰ä¸€ä¸ªç±»ï¼Œç»§æ‰¿è¯¥æŠ½è±¡ç±»ï¼Œé‡å†™æŠ½è±¡æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨æŠ½è±¡ç±»ï¼Œå®ç°å¯¹å­ç±»çš„è°ƒç”¨ï¼Œå…ˆçœ‹ä¸ªå…³ç³»å›¾ï¼š</p>
<p>å°±æ˜¯åœ¨AbstractCalculatorç±»ä¸­å®šä¹‰ä¸€ä¸ªä¸»æ–¹æ³•calculateï¼Œcalculate()è°ƒç”¨spilt()ç­‰ï¼ŒPluså’ŒMinusåˆ†åˆ«ç»§æ‰¿AbstractCalculatorç±»ï¼Œé€šè¿‡å¯¹AbstractCalculatorçš„è°ƒç”¨å®ç°å¯¹å­ç±»çš„è°ƒç”¨ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<p>public abstract class AbstractCalculator { </p>
<p> /<em>ä¸»æ–¹æ³•ï¼Œå®ç°å¯¹æœ¬ç±»å…¶å®ƒæ–¹æ³•çš„è°ƒç”¨</em>/<br> public final int calculate(String exp,String opt){<br>  int array[] = split(exp,opt);<br>  return calculate(array[0],array[1]);<br> } </p>
<p> /<em>è¢«å­ç±»é‡å†™çš„æ–¹æ³•</em>/<br> abstract public int calculate(int num1,int num2); </p>
<p> public int[] split(String exp,String opt){<br>  String array[] = exp.split(opt);<br>  int arrayInt[] = new int[2];<br>  arrayInt[0] = Integer.parseInt(array[0]);<br>  arrayInt[1] = Integer.parseInt(array[1]);<br>  return arrayInt;<br> }<br>}</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>public class Plus extends AbstractCalculator { </p>
<p> @Override<br> public int calculate(int num1,int num2) {<br>  return num1 + num2;<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class StrategyTest { </p>
<p> public static void main(String[] args) {<br>  String exp = â€œ8+8â€;<br>  AbstractCalculator cal = new Plus();<br>  int result = cal.calculate(exp, â€œ\+â€);<br>  System.out.println(result);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>æˆ‘è·Ÿè¸ªä¸‹è¿™ä¸ªå°ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ï¼šé¦–å…ˆå°†expå’Œâ€+â€œåšå‚æ•°ï¼Œè°ƒç”¨AbstractCalculatorç±»é‡Œçš„calculate(String,String)æ–¹æ³•ï¼Œåœ¨calculate(String,String)é‡Œè°ƒç”¨åŒç±»çš„split()ï¼Œä¹‹åå†è°ƒç”¨calculate(int ,int)æ–¹æ³•ï¼Œä»è¿™ä¸ªæ–¹æ³•è¿›å…¥åˆ°å­ç±»ä¸­ï¼Œæ‰§è¡Œå®Œreturn num1 + num2åï¼Œå°†å€¼è¿”å›åˆ°AbstractCalculatorç±»ï¼Œèµ‹ç»™resultï¼Œæ‰“å°å‡ºæ¥ã€‚æ­£å¥½éªŒè¯äº†æˆ‘ä»¬å¼€å¤´çš„æ€è·¯ã€‚</p>
<p>4.15 â˜˜ï¸è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰<br>åŒ…æ‹¬è¿™ä¸ªæ¨¡å¼åœ¨å†…çš„æ¥ä¸‹æ¥çš„å››ä¸ªæ¨¡å¼ï¼Œéƒ½æ˜¯ç±»å’Œç±»ä¹‹é—´çš„å…³ç³»ï¼Œä¸æ¶‰åŠåˆ°ç»§æ‰¿ï¼Œå­¦çš„æ—¶å€™åº”è¯¥ è®°å¾—å½’çº³ï¼Œè®°å¾—æœ¬æ–‡æœ€å¼€å§‹çš„é‚£ä¸ªå›¾ã€‚è§‚å¯Ÿè€…æ¨¡å¼å¾ˆå¥½ç†è§£ï¼Œç±»ä¼¼äºé‚®ä»¶è®¢é˜…å’ŒRSSè®¢é˜…ï¼Œå½“æˆ‘ä»¬æµè§ˆä¸€äº›åšå®¢æˆ–wikiæ—¶ï¼Œç»å¸¸ä¼šçœ‹åˆ°RSSå›¾æ ‡ï¼Œå°±è¿™çš„æ„æ€æ˜¯ï¼Œå½“ä½ è®¢é˜…äº†è¯¥æ–‡ç« ï¼Œå¦‚æœåç»­æœ‰æ›´æ–°ï¼Œä¼šåŠæ—¶é€šçŸ¥ä½ ã€‚å…¶å®ï¼Œç®€å•æ¥è®²å°±ä¸€å¥è¯ï¼šå½“ä¸€ä¸ªå¯¹è±¡å˜åŒ–æ—¶ï¼Œå…¶å®ƒä¾èµ–è¯¥å¯¹è±¡çš„å¯¹è±¡éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œå¹¶ä¸”éšç€å˜åŒ–ï¼å¯¹è±¡ä¹‹é—´æ˜¯ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ã€‚å…ˆæ¥çœ‹çœ‹å…³ç³»å›¾ï¼š</p>
<p>æˆ‘è§£é‡Šä¸‹è¿™äº›ç±»çš„ä½œç”¨ï¼šMySubjectç±»å°±æ˜¯æˆ‘ä»¬çš„ä¸»å¯¹è±¡ï¼ŒObserver1å’ŒObserver2æ˜¯ä¾èµ–äºMySubjectçš„å¯¹è±¡ï¼Œå½“MySubjectå˜åŒ–æ—¶ï¼ŒObserver1å’ŒObserver2å¿…ç„¶å˜åŒ–ã€‚AbstractSubjectç±»ä¸­å®šä¹‰ç€éœ€è¦ç›‘æ§çš„å¯¹è±¡åˆ—è¡¨ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼šå¢åŠ æˆ–åˆ é™¤è¢«ç›‘æ§å¯¹è±¡ï¼Œä¸”å½“MySubjectå˜åŒ–æ—¶ï¼Œè´Ÿè´£é€šçŸ¥åœ¨åˆ—è¡¨å†…å­˜åœ¨çš„å¯¹è±¡ã€‚æˆ‘ä»¬çœ‹å®ç°ä»£ç ï¼š<br>ä¸€ä¸ªObserveræ¥å£ï¼š</p>
<p>public interface Observer {<br> public void update();<br>}<br>1<br>2<br>3<br>ä¸¤ä¸ªå®ç°ç±»ï¼š</p>
<p>public class Observer1 implements Observer { </p>
<p> @Override<br> public void update() {<br>  System.out.println(â€œobserver1 has received!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>public class Observer2 implements Observer { </p>
<p> @Override<br> public void update() {<br>  System.out.println(â€œobserver2 has received!â€);<br> } </p>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>Subjectæ¥å£åŠå®ç°ç±»ï¼š</p>
<p>public interface Subject { </p>
<p> /<em>å¢åŠ è§‚å¯Ÿè€…</em>/<br> public void add(Observer observer); </p>
<p> /<em>åˆ é™¤è§‚å¯Ÿè€…</em>/<br> public void del(Observer observer); </p>
<p> /<em>é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…</em>/<br> public void notifyObservers(); </p>
<p> /<em>è‡ªèº«çš„æ“ä½œ</em>/<br> public void operation();<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>public abstract class AbstractSubject implements Subject { </p>
<p> private Vector<Observer> vector = new Vector<Observer>();<br> @Override<br> public void add(Observer observer) {<br>  vector.add(observer);<br> } </p>
<p> @Override<br> public void del(Observer observer) {<br>  vector.remove(observer);<br> } </p>
<p> @Override<br> public void notifyObservers() {<br>  Enumeration<Observer> enumo = vector.elements();<br>  while(enumo.hasMoreElements()){<br>   enumo.nextElement().update();<br>  }<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>public class MySubject extends AbstractSubject { </p>
<p> @Override<br> public void operation() {<br>  System.out.println(â€œupdate self!â€);<br>  notifyObservers();<br> } </p>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class ObserverTest { </p>
<p> public static void main(String[] args) {<br>  Subject sub = new MySubject();<br>  sub.add(new Observer1());<br>  sub.add(new Observer2());<br>  sub.operation();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>è¾“å‡ºï¼š<br>update self!<br>observer1 has received!<br>observer2 has received!<br>è¿™äº›ä¸œè¥¿ï¼Œå…¶å®ä¸éš¾ï¼Œåªæ˜¯æœ‰äº›æŠ½è±¡ï¼Œä¸å¤ªå®¹æ˜“æ•´ä½“ç†è§£ï¼Œå»ºè®®è¯»è€…ï¼šæ ¹æ®å…³ç³»å›¾ï¼Œæ–°å»ºé¡¹ç›®ï¼Œè‡ªå·±å†™ä»£ç ï¼ˆæˆ–è€…å‚è€ƒæˆ‘çš„ä»£ç ï¼‰,æŒ‰ç…§æ€»ä½“æ€è·¯èµ°ä¸€éï¼Œè¿™æ ·æ‰èƒ½ä½“ä¼šå®ƒçš„æ€æƒ³ï¼Œç†è§£èµ·æ¥å®¹æ˜“ï¼</p>
<p>4.16 â˜˜ï¸è¿­ä»£å­æ¨¡å¼ï¼ˆIteratorï¼‰<br>é¡¾åæ€ä¹‰ï¼Œè¿­ä»£å™¨æ¨¡å¼å°±æ˜¯é¡ºåºè®¿é—®èšé›†ä¸­çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé›†åˆä¸­éå¸¸å¸¸è§ï¼Œå¦‚æœå¯¹é›†åˆç±»æ¯”è¾ƒç†Ÿæ‚‰çš„è¯ï¼Œç†è§£æœ¬æ¨¡å¼ä¼šååˆ†è½»æ¾ã€‚è¿™å¥è¯åŒ…å«ä¸¤å±‚æ„æ€ï¼šä¸€æ˜¯éœ€è¦éå†çš„å¯¹è±¡ï¼Œå³èšé›†å¯¹è±¡ï¼ŒäºŒæ˜¯è¿­ä»£å™¨å¯¹è±¡ï¼Œç”¨äºå¯¹èšé›†å¯¹è±¡è¿›è¡Œéå†è®¿é—®ã€‚æˆ‘ä»¬çœ‹ä¸‹å…³ç³»å›¾ï¼š</p>
<p>è¿™ä¸ªæ€è·¯å’Œæˆ‘ä»¬å¸¸ç”¨çš„ä¸€æ¨¡ä¸€æ ·ï¼ŒMyCollectionä¸­å®šä¹‰äº†é›†åˆçš„ä¸€äº›æ“ä½œï¼ŒMyIteratorä¸­å®šä¹‰äº†ä¸€ç³»åˆ—è¿­ä»£æ“ä½œï¼Œä¸”æŒæœ‰Collectionå®ä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ç°ä»£ç ï¼š<br>ä¸¤ä¸ªæ¥å£ï¼š</p>
<p>public interface Collection { </p>
<p> public Iterator iterator(); </p>
<p> /<em>å–å¾—é›†åˆå…ƒç´ </em>/<br> public Object get(int i); </p>
<p> /<em>å–å¾—é›†åˆå¤§å°</em>/<br> public int size();<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>public interface Iterator {<br> //å‰ç§»<br> public Object previous(); </p>
<p> //åç§»<br> public Object next();<br> public boolean hasNext(); </p>
<p> //å–å¾—ç¬¬ä¸€ä¸ªå…ƒç´ <br> public Object first();<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>ä¸¤ä¸ªå®ç°ï¼š</p>
<p>public class MyCollection implements Collection { </p>
<p> public String string[] = {â€œAâ€,â€Bâ€,â€Câ€,â€Dâ€,â€Eâ€};<br> @Override<br> public Iterator iterator() {<br>  return new MyIterator(this);<br> } </p>
<p> @Override<br> public Object get(int i) {<br>  return string[i];<br> } </p>
<p> @Override<br> public int size() {<br>  return string.length;<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>public class MyIterator implements Iterator { </p>
<p> private Collection collection;<br> private int pos = -1; </p>
<p> public MyIterator(Collection collection){<br>  this.collection = collection;<br> } </p>
<p> @Override<br> public Object previous() {<br>  if(pos &gt; 0){<br>   posâ€“;<br>  }<br>  return collection.get(pos);<br> } </p>
<p> @Override<br> public Object next() {<br>  if(pos&lt;collection.size()-1){<br>   pos++;<br>  }<br>  return collection.get(pos);<br> } </p>
<p> @Override<br> public boolean hasNext() {<br>  if(pos&lt;collection.size()-1){<br>   return true;<br>  }else{<br>   return false;<br>  }<br> } </p>
<p> @Override<br> public Object first() {<br>  pos = 0;<br>  return collection.get(pos);<br> } </p>
<p>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class Test { </p>
<p> public static void main(String[] args) {<br>  Collection collection = new MyCollection();<br>  Iterator it = collection.iterator(); </p>
<p>  while(it.hasNext()){<br>   System.out.println(it.next());<br>  }<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>è¾“å‡ºï¼šA B C D E<br>æ­¤å¤„æˆ‘ä»¬è²Œä¼¼æ¨¡æ‹Ÿäº†ä¸€ä¸ªé›†åˆç±»çš„è¿‡ç¨‹ï¼Œæ„Ÿè§‰æ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿå…¶å®JDKä¸­å„ä¸ªç±»ä¹Ÿéƒ½æ˜¯è¿™äº›åŸºæœ¬çš„ä¸œè¥¿ï¼ŒåŠ ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œå†åŠ ä¸€äº›ä¼˜åŒ–æ”¾åˆ°ä¸€èµ·çš„ï¼Œåªè¦æˆ‘ä»¬æŠŠè¿™äº›ä¸œè¥¿å­¦ä¼šäº†ï¼ŒæŒæ¡å¥½äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å†™å‡ºè‡ªå·±çš„é›†åˆç±»ï¼Œç”šè‡³æ¡†æ¶ï¼</p>
<p>4.17 â˜˜ï¸è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰<br>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¦è°ˆè°ˆè´£ä»»é“¾æ¨¡å¼ï¼Œæœ‰å¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡æŒæœ‰å¯¹ä¸‹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šå½¢æˆä¸€æ¡é“¾ï¼Œè¯·æ±‚åœ¨è¿™æ¡é“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°æŸä¸€å¯¹è±¡å†³å®šå¤„ç†è¯¥è¯·æ±‚ã€‚ä½†æ˜¯å‘å‡ºè€…å¹¶ä¸æ¸…æ¥šåˆ°åº•æœ€ç»ˆé‚£ä¸ªå¯¹è±¡ä¼šå¤„ç†è¯¥è¯·æ±‚ï¼Œæ‰€ä»¥ï¼Œè´£ä»»é“¾æ¨¡å¼å¯ä»¥å®ç°ï¼Œåœ¨éšç’å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹ï¼Œå¯¹ç³»ç»Ÿè¿›è¡ŒåŠ¨æ€çš„è°ƒæ•´ã€‚å…ˆçœ‹çœ‹å…³ç³»å›¾ï¼š</p>
<p>Abstracthandlerç±»æä¾›äº†getå’Œsetæ–¹æ³•ï¼Œæ–¹ä¾¿MyHandleç±»è®¾ç½®å’Œä¿®æ”¹å¼•ç”¨å¯¹è±¡ï¼ŒMyHandleç±»æ˜¯æ ¸å¿ƒï¼Œå®ä¾‹åŒ–åç”Ÿæˆä¸€ç³»åˆ—ç›¸äº’æŒæœ‰çš„å¯¹è±¡ï¼Œæ„æˆä¸€æ¡é“¾ã€‚</p>
<p>public interface Handler {<br> public void operator();<br>}<br>1<br>2<br>3<br>public abstract class AbstractHandler { </p>
<p> private Handler handler; </p>
<p> public Handler getHandler() {<br>  return handler;<br> } </p>
<p> public void setHandler(Handler handler) {<br>  this.handler = handler;<br> } </p>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>public class MyHandler extends AbstractHandler implements Handler { </p>
<p> private String name; </p>
<p> public MyHandler(String name) {<br>  this.name = name;<br> } </p>
<p> @Override<br> public void operator() {<br>  System.out.println(name+â€deal!â€);<br>  if(getHandler()!=null){<br>   getHandler().operator();<br>  }<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>public class Test { </p>
<p> public static void main(String[] args) {<br>  MyHandler h1 = new MyHandler(â€œh1â€);<br>  MyHandler h2 = new MyHandler(â€œh2â€);<br>  MyHandler h3 = new MyHandler(â€œh3â€); </p>
<p>  h1.setHandler(h2);<br>  h2.setHandler(h3);<br>  h1.operator();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>è¾“å‡ºï¼š<br>h1deal!<br>h2deal!<br>h3deal!<br>æ­¤å¤„å¼ºè°ƒä¸€ç‚¹å°±æ˜¯ï¼Œé“¾æ¥ä¸Šçš„è¯·æ±‚å¯ä»¥æ˜¯ä¸€æ¡é“¾ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ ‘ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªç¯ï¼Œæ¨¡å¼æœ¬èº«ä¸çº¦æŸè¿™ä¸ªï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å»å®ç°ï¼ŒåŒæ—¶ï¼Œåœ¨ä¸€ä¸ªæ—¶åˆ»ï¼Œå‘½ä»¤åªå…è®¸ç”±ä¸€ä¸ªå¯¹è±¡ä¼ ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸å…è®¸ä¼ ç»™å¤šä¸ªå¯¹è±¡ã€‚</p>
<p>4.18 â˜˜ï¸å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰<br>å‘½ä»¤æ¨¡å¼å¾ˆå¥½ç†è§£ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¸ä»¤å‘˜ä¸‹ä»¤è®©å£«å…µå»å¹²ä»¶äº‹æƒ…ï¼Œä»æ•´ä¸ªäº‹æƒ…çš„è§’åº¦æ¥è€ƒè™‘ï¼Œå¸ä»¤å‘˜çš„ä½œç”¨æ˜¯ï¼Œå‘å‡ºå£ä»¤ï¼Œå£ä»¤ç»è¿‡ä¼ é€’ï¼Œä¼ åˆ°äº†å£«å…µè€³æœµé‡Œï¼Œå£«å…µå»æ‰§è¡Œã€‚è¿™ä¸ªè¿‡ç¨‹å¥½åœ¨ï¼Œä¸‰è€…ç›¸äº’è§£è€¦ï¼Œä»»ä½•ä¸€æ–¹éƒ½ä¸ç”¨å»ä¾èµ–å…¶ä»–äººï¼Œåªéœ€è¦åšå¥½è‡ªå·±çš„äº‹å„¿å°±è¡Œï¼Œå¸ä»¤å‘˜è¦çš„æ˜¯ç»“æœï¼Œä¸ä¼šå»å…³æ³¨åˆ°åº•å£«å…µæ˜¯æ€ä¹ˆå®ç°çš„ã€‚æˆ‘ä»¬çœ‹çœ‹å…³ç³»å›¾ï¼š</p>
<p>Invokeræ˜¯è°ƒç”¨è€…ï¼ˆå¸ä»¤å‘˜ï¼‰ï¼ŒReceiveræ˜¯è¢«è°ƒç”¨è€…ï¼ˆå£«å…µï¼‰ï¼ŒMyCommandæ˜¯å‘½ä»¤ï¼Œå®ç°äº†Commandæ¥å£ï¼ŒæŒæœ‰æ¥æ”¶å¯¹è±¡ï¼Œçœ‹å®ç°ä»£ç ï¼š</p>
<p>public interface Command {<br> public void exe();<br>}<br>1<br>2<br>3<br>public class MyCommand implements Command { </p>
<p> private Receiver receiver; </p>
<p> public MyCommand(Receiver receiver) {<br>  this.receiver = receiver;<br> } </p>
<p> @Override<br> public void exe() {<br>  receiver.action();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>public class Receiver {<br> public void action(){<br>  System.out.println(â€œcommand received!â€);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>public class Invoker { </p>
<p> private Command command; </p>
<p> public Invoker(Command command) {<br>  this.command = command;<br> } </p>
<p> public void action(){<br>  command.exe();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>public class Test { </p>
<p> public static void main(String[] args) {<br>  Receiver receiver = new Receiver();<br>  Command cmd = new MyCommand(receiver);<br>  Invoker invoker = new Invoker(cmd);<br>  invoker.action();<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>è¾“å‡ºï¼šcommand received!<br>è¿™ä¸ªå¾ˆå“ˆç†è§£ï¼Œå‘½ä»¤æ¨¡å¼çš„ç›®çš„å°±æ˜¯è¾¾åˆ°å‘½ä»¤çš„å‘å‡ºè€…å’Œæ‰§è¡Œè€…ä¹‹é—´è§£è€¦ï¼Œå®ç°è¯·æ±‚å’Œæ‰§è¡Œåˆ†å¼€ï¼Œç†Ÿæ‚‰Strutsçš„åŒå­¦åº”è¯¥çŸ¥é“ï¼ŒStrutså…¶å®å°±æ˜¯ä¸€ç§å°†è¯·æ±‚å’Œå‘ˆç°åˆ†ç¦»çš„æŠ€æœ¯ï¼Œå…¶ä¸­å¿…ç„¶æ¶‰åŠå‘½ä»¤æ¨¡å¼çš„æ€æƒ³ï¼</p>
<p>4.19 â˜˜ï¸å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰<br>ä¸»è¦ç›®çš„æ˜¯ä¿å­˜ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªçŠ¶æ€ï¼Œä»¥ä¾¿åœ¨é€‚å½“çš„æ—¶å€™æ¢å¤å¯¹è±¡ï¼Œä¸ªäººè§‰å¾—å«å¤‡ä»½æ¨¡å¼æ›´å½¢è±¡äº›ï¼Œé€šä¿—çš„è®²ä¸‹ï¼šå‡è®¾æœ‰åŸå§‹ç±»Aï¼ŒAä¸­æœ‰å„ç§å±æ€§ï¼ŒAå¯ä»¥å†³å®šéœ€è¦å¤‡ä»½çš„å±æ€§ï¼Œå¤‡å¿˜å½•ç±»Bæ˜¯ç”¨æ¥å­˜å‚¨Açš„ä¸€äº›å†…éƒ¨çŠ¶æ€ï¼Œç±»Cå‘¢ï¼Œå°±æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨å¤‡å¿˜å½•çš„ï¼Œä¸”åªèƒ½å­˜å‚¨ï¼Œä¸èƒ½ä¿®æ”¹ç­‰æ“ä½œã€‚åšä¸ªå›¾æ¥åˆ†æä¸€ä¸‹ï¼š</p>
<p>Originalç±»æ˜¯åŸå§‹ç±»ï¼Œé‡Œé¢æœ‰éœ€è¦ä¿å­˜çš„å±æ€§valueåŠåˆ›å»ºä¸€ä¸ªå¤‡å¿˜å½•ç±»ï¼Œç”¨æ¥ä¿å­˜valueå€¼ã€‚Mementoç±»æ˜¯å¤‡å¿˜å½•ç±»ï¼ŒStorageç±»æ˜¯å­˜å‚¨å¤‡å¿˜å½•çš„ç±»ï¼ŒæŒæœ‰Mementoç±»çš„å®ä¾‹ï¼Œè¯¥æ¨¡å¼å¾ˆå¥½ç†è§£ã€‚ç›´æ¥çœ‹æºç ï¼š</p>
<p>public class Original { </p>
<p> private String value; </p>
<p> public String getValue() {<br>  return value;<br> } </p>
<p> public void setValue(String value) {<br>  this.value = value;<br> } </p>
<p> public Original(String value) {<br>  this.value = value;<br> } </p>
<p> public Memento createMemento(){<br>  return new Memento(value);<br> } </p>
<p> public void restoreMemento(Memento memento){<br>  this.value = memento.getValue();<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>public class Memento { </p>
<p> private String value; </p>
<p> public Memento(String value) {<br>  this.value = value;<br> } </p>
<p> public String getValue() {<br>  return value;<br> } </p>
<p> public void setValue(String value) {<br>  this.value = value;<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>public class Storage { </p>
<p> private Memento memento; </p>
<p> public Storage(Memento memento) {<br>  this.memento = memento;<br> } </p>
<p> public Memento getMemento() {<br>  return memento;<br> } </p>
<p> public void setMemento(Memento memento) {<br>  this.memento = memento;<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class Test { </p>
<p> public static void main(String[] args) { </p>
<p>  // åˆ›å»ºåŸå§‹ç±»<br>  Original origi = new Original(â€œeggâ€); </p>
<p>  // åˆ›å»ºå¤‡å¿˜å½•<br>  Storage storage = new Storage(origi.createMemento()); </p>
<p>  // ä¿®æ”¹åŸå§‹ç±»çš„çŠ¶æ€<br>  System.out.println(â€œåˆå§‹åŒ–çŠ¶æ€ä¸ºï¼šâ€ + origi.getValue());<br>  origi.setValue(â€œniuâ€);<br>  System.out.println(â€œä¿®æ”¹åçš„çŠ¶æ€ä¸ºï¼šâ€ + origi.getValue()); </p>
<p>  // å›å¤åŸå§‹ç±»çš„çŠ¶æ€<br>  origi.restoreMemento(storage.getMemento());<br>  System.out.println(â€œæ¢å¤åçš„çŠ¶æ€ä¸ºï¼šâ€ + origi.getValue());<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>è¾“å‡ºï¼š<br>åˆå§‹åŒ–çŠ¶æ€ä¸ºï¼šegg<br>ä¿®æ”¹åçš„çŠ¶æ€ä¸ºï¼šniu<br>æ¢å¤åçš„çŠ¶æ€ä¸ºï¼šegg<br>ç®€å•æè¿°ä¸‹ï¼šæ–°å»ºåŸå§‹ç±»æ—¶ï¼Œvalueè¢«åˆå§‹åŒ–ä¸ºeggï¼Œåç»è¿‡ä¿®æ”¹ï¼Œå°†valueçš„å€¼ç½®ä¸ºniuï¼Œæœ€åå€’æ•°ç¬¬äºŒè¡Œè¿›è¡Œæ¢å¤çŠ¶æ€ï¼Œç»“æœæˆåŠŸæ¢å¤äº†ã€‚å…¶å®æˆ‘è§‰å¾—è¿™ä¸ªæ¨¡å¼å«â€œå¤‡ä»½-æ¢å¤â€æ¨¡å¼æœ€å½¢è±¡ã€‚</p>
<p>4.20 â˜˜ï¸çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰<br>æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼šå½“å¯¹è±¡çš„çŠ¶æ€æ”¹å˜æ—¶ï¼ŒåŒæ—¶æ”¹å˜å…¶è¡Œä¸ºï¼Œå¾ˆå¥½ç†è§£ï¼å°±æ‹¿QQæ¥è¯´ï¼Œæœ‰å‡ ç§çŠ¶æ€ï¼Œåœ¨çº¿ã€éšèº«ã€å¿™ç¢Œç­‰ï¼Œæ¯ä¸ªçŠ¶æ€å¯¹åº”ä¸åŒçš„æ“ä½œï¼Œè€Œä¸”ä½ çš„å¥½å‹ä¹Ÿèƒ½çœ‹åˆ°ä½ çš„çŠ¶æ€ï¼Œæ‰€ä»¥ï¼ŒçŠ¶æ€æ¨¡å¼å°±ä¸¤ç‚¹ï¼š1ã€å¯ä»¥é€šè¿‡æ”¹å˜çŠ¶æ€æ¥è·å¾—ä¸åŒçš„è¡Œä¸ºã€‚2ã€ä½ çš„å¥½å‹èƒ½åŒæ—¶çœ‹åˆ°ä½ çš„å˜åŒ–ã€‚çœ‹å›¾ï¼š</p>
<p>Stateç±»æ˜¯ä¸ªçŠ¶æ€ç±»ï¼ŒContextç±»å¯ä»¥å®ç°åˆ‡æ¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç ï¼š</p>
<p>package com.xtfggef.dp.state; </p>
<p>/** </p>
<ul>
<li>çŠ¶æ€ç±»çš„æ ¸å¿ƒç±» </li>
<li>2012-12-1 </li>
<li>@author erqing </li>
<li></li>
<li>/<br>public class State { </li>
</ul>
<p> private String value; </p>
<p> public String getValue() {<br>  return value;<br> } </p>
<p> public void setValue(String value) {<br>  this.value = value;<br> } </p>
<p> public void method1(){<br>  System.out.println(â€œexecute the first opt!â€);<br> } </p>
<p> public void method2(){<br>  System.out.println(â€œexecute the second opt!â€);<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>package com.xtfggef.dp.state; </p>
<p>/** </p>
<ul>
<li>çŠ¶æ€æ¨¡å¼çš„åˆ‡æ¢ç±» 2012-12-1 </li>
<li>@author erqing </li>
<li></li>
<li>/<br>public class Context { </li>
</ul>
<p> private State state; </p>
<p> public Context(State state) {<br>  this.state = state;<br> } </p>
<p> public State getState() {<br>  return state;<br> } </p>
<p> public void setState(State state) {<br>  this.state = state;<br> } </p>
<p> public void method() {<br>  if (state.getValue().equals(â€œstate1â€)) {<br>   state.method1();<br>  } else if (state.getValue().equals(â€œstate2â€)) {<br>   state.method2();<br>  }<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class Test { </p>
<p> public static void main(String[] args) { </p>
<p>  State state = new State();<br>  Context context = new Context(state); </p>
<p>  //è®¾ç½®ç¬¬ä¸€ç§çŠ¶æ€<br>  state.setValue(â€œstate1â€);<br>  context.method(); </p>
<p>  //è®¾ç½®ç¬¬äºŒç§çŠ¶æ€<br>  state.setValue(â€œstate2â€);<br>  context.method();<br> }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>è¾“å‡ºï¼š<br>execute the first opt!<br>execute the second opt!<br>æ ¹æ®è¿™ä¸ªç‰¹æ€§ï¼ŒçŠ¶æ€æ¨¡å¼åœ¨æ—¥å¸¸å¼€å‘ä¸­ç”¨çš„æŒºå¤šçš„ï¼Œå°¤å…¶æ˜¯åšç½‘ç«™çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰æ—¶å¸Œæœ›æ ¹æ®å¯¹è±¡çš„æŸä¸€å±æ€§ï¼ŒåŒºåˆ«å¼€ä»–ä»¬çš„ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´ç®€å•çš„æƒé™æ§åˆ¶ç­‰ã€‚</p>
<p>4.21 â˜˜ï¸è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰<br>è®¿é—®è€…æ¨¡å¼æŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œè§£è€¦åˆï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–ã€‚è®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹ç¨³å®šç®—æ³•åˆæ˜“å˜åŒ–çš„ç³»ç»Ÿã€‚å› ä¸ºè®¿é—®è€…æ¨¡å¼ä½¿å¾—ç®—æ³•æ“ä½œå¢åŠ å˜å¾—å®¹æ˜“ã€‚è‹¥ç³»ç»Ÿæ•°æ®ç»“æ„å¯¹è±¡æ˜“äºå˜åŒ–ï¼Œç»å¸¸æœ‰æ–°çš„æ•°æ®å¯¹è±¡å¢åŠ è¿›æ¥ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨è®¿é—®è€…æ¨¡å¼ã€‚è®¿é—®è€…æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯å¢åŠ æ“ä½œå¾ˆå®¹æ˜“ï¼Œå› ä¸ºå¢åŠ æ“ä½œæ„å‘³ç€å¢åŠ æ–°çš„è®¿é—®è€…ã€‚è®¿é—®è€…æ¨¡å¼å°†æœ‰å…³è¡Œä¸ºé›†ä¸­åˆ°ä¸€ä¸ªè®¿é—®è€…å¯¹è±¡ä¸­ï¼Œå…¶æ”¹å˜ä¸å½±å“ç³»ç»Ÿæ•°æ®ç»“æ„ã€‚å…¶ç¼ºç‚¹å°±æ˜¯å¢åŠ æ–°çš„æ•°æ®ç»“æ„å¾ˆå›°éš¾ã€‚<br>ç®€å•æ¥è¯´ï¼Œè®¿é—®è€…æ¨¡å¼å°±æ˜¯ä¸€ç§åˆ†ç¦»å¯¹è±¡æ•°æ®ç»“æ„ä¸è¡Œä¸ºçš„æ–¹æ³•ï¼Œé€šè¿‡è¿™ç§åˆ†ç¦»ï¼Œå¯è¾¾åˆ°ä¸ºä¸€ä¸ªè¢«è®¿é—®è€…åŠ¨æ€æ·»åŠ æ–°çš„æ“ä½œè€Œæ— éœ€åšå…¶å®ƒçš„ä¿®æ”¹çš„æ•ˆæœã€‚ç®€å•å…³ç³»å›¾ï¼š</p>
<p>æ¥çœ‹çœ‹åŸç ï¼šä¸€ä¸ªVisitorç±»ï¼Œå­˜æ”¾è¦è®¿é—®çš„å¯¹è±¡ï¼Œ</p>
<p>public interface Visitor {<br> public void visit(Subject sub);<br>}<br>1<br>2<br>3<br>public class MyVisitor implements Visitor { </p>
<p> @Override<br> public void visit(Subject sub) {<br>  System.out.println(â€œvisit the subjectï¼šâ€+sub.getSubject());<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>Subjectç±»ï¼Œacceptæ–¹æ³•ï¼Œæ¥å—å°†è¦è®¿é—®å®ƒçš„å¯¹è±¡ï¼ŒgetSubject()è·å–å°†è¦è¢«è®¿é—®çš„å±æ€§ï¼Œ</p>
<p>public interface Subject {<br> public void accept(Visitor visitor);<br> public String getSubject();<br>}<br>1<br>2<br>3<br>4<br>public class MySubject implements Subject { </p>
<p> @Override<br> public void accept(Visitor visitor) {<br>  visitor.visit(this);<br> } </p>
<p> @Override<br> public String getSubject() {<br>  return â€œloveâ€;<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>æµ‹è¯•ï¼š</p>
<p>public class Test { </p>
<p> public static void main(String[] args) { </p>
<p>  Visitor visitor = new MyVisitor();<br>  Subject sub = new MySubject();<br>  sub.accept(visitor);<br> }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>è¾“å‡ºï¼švisit the subjectï¼šlove<br>è¯¥æ¨¡å¼é€‚ç”¨åœºæ™¯ï¼šå¦‚æœæˆ‘ä»¬æƒ³ä¸ºä¸€ä¸ªç°æœ‰çš„ç±»å¢åŠ æ–°åŠŸèƒ½ï¼Œä¸å¾—ä¸è€ƒè™‘å‡ ä¸ªäº‹æƒ…ï¼š1ã€æ–°åŠŸèƒ½ä¼šä¸ä¼šä¸ç°æœ‰åŠŸèƒ½å‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼Ÿ2ã€ä»¥åä¼šä¸ä¼šå†éœ€è¦æ·»åŠ ï¼Ÿ3ã€å¦‚æœç±»ä¸å…è®¸ä¿®æ”¹ä»£ç æ€ä¹ˆåŠï¼Ÿé¢å¯¹è¿™äº›é—®é¢˜ï¼Œæœ€å¥½çš„è§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ï¼Œè®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹ç¨³å®šçš„ç³»ç»Ÿï¼ŒæŠŠæ•°æ®ç»“æ„å’Œç®—æ³•è§£è€¦ã€‚</p>
<p>4.22 â˜˜ï¸ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediatorï¼‰<br>ä¸­ä»‹è€…æ¨¡å¼ä¹Ÿæ˜¯ç”¨æ¥é™ä½ç±»ç±»ä¹‹é—´çš„è€¦åˆçš„ï¼Œå› ä¸ºå¦‚æœç±»ç±»ä¹‹é—´æœ‰ä¾èµ–å…³ç³»çš„è¯ï¼Œä¸åˆ©äºåŠŸèƒ½çš„æ‹“å±•å’Œç»´æŠ¤ï¼Œå› ä¸ºåªè¦ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å®ƒå…³è”çš„å¯¹è±¡éƒ½å¾—è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼Œåªéœ€å…³å¿ƒå’ŒMediatorç±»çš„å…³ç³»ï¼Œå…·ä½“ç±»ç±»ä¹‹é—´çš„å…³ç³»åŠè°ƒåº¦äº¤ç»™Mediatorå°±è¡Œï¼Œè¿™æœ‰ç‚¹åƒspringå®¹å™¨çš„ä½œç”¨ã€‚å…ˆçœ‹çœ‹å›¾ï¼š</p>
<p>Userç±»ç»Ÿä¸€æ¥å£ï¼ŒUser1å’ŒUser2åˆ†åˆ«æ˜¯ä¸åŒçš„å¯¹è±¡ï¼ŒäºŒè€…ä¹‹é—´æœ‰å…³è”ï¼Œå¦‚æœä¸é‡‡ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼Œåˆ™éœ€è¦äºŒè€…ç›¸äº’æŒæœ‰å¼•ç”¨ï¼Œè¿™æ ·äºŒè€…çš„è€¦åˆåº¦å¾ˆé«˜ï¼Œä¸ºäº†è§£è€¦ï¼Œå¼•å…¥äº†Mediatorç±»ï¼Œæä¾›ç»Ÿä¸€æ¥å£ï¼Œ</p>
<p>MyMediatorä¸ºå…¶å®ç°ç±»ï¼Œé‡Œé¢æŒæœ‰User1å’ŒUser2çš„å®ä¾‹ï¼Œç”¨æ¥å®ç°å¯¹User1å’ŒUser2çš„æ§åˆ¶ã€‚è¿™æ ·User1å’ŒUser2ä¸¤ä¸ªå¯¹è±¡ç›¸äº’ç‹¬ç«‹ï¼Œä»–ä»¬åªéœ€è¦ä¿æŒå¥½å’ŒMediatorä¹‹é—´çš„å…³ç³»å°±è¡Œï¼Œå‰©ä¸‹çš„å…¨ç”±MyMediatorç±»æ¥ç»´æŠ¤ï¼åŸºæœ¬å®ç°ï¼š</p>
<p>public interface Mediator {<br>  public void createMediator();<br>  public void workAll();<br>}<br>1<br>2<br>3<br>4<br>public class MyMediator implements Mediator { </p>
<p>  private User user1;<br>  private User user2; </p>
<p>  public User getUser1() {<br>    return user1;<br>  } </p>
<p>  public User getUser2() {<br>    return user2;<br>  } </p>
<p>  @Override<br>  public void createMediator() {<br>    user1 = new User1(this);<br>    user2 = new User2(this);<br>  } </p>
<p>  @Override<br>  public void workAll() {<br>    user1.work();<br>    user2.work();<br>  }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>public abstract class User { </p>
<p>  private Mediator mediator; </p>
<p>  public Mediator getMediator(){<br>    return mediator;<br>  } </p>
<p>  public User(Mediator mediator) {<br>    this.mediator = mediator;<br>  } </p>
<p>  public abstract void work();<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>public class User1 extends User { </p>
<p>  public User1(Mediator mediator){<br>    super(mediator);<br>  } </p>
<p>  @Override<br>  public void work() {<br>    System.out.println(â€œuser1 exe!â€);<br>  }<br>}<br>[java] view plaincopy<br>public class User2 extends User { </p>
<p>  public User2(Mediator mediator){<br>    super(mediator);<br>  } </p>
<p>  @Override<br>  public void work() {<br>    System.out.println(â€œuser2 exe!â€);<br>  }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>æµ‹è¯•ç±»ï¼š</p>
<p>public class Test { </p>
<p>  public static void main(String[] args) {<br>    Mediator mediator = new MyMediator();<br>    mediator.createMediator();<br>    mediator.workAll();<br>  }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>è¾“å‡ºï¼š<br>user1 exe!<br>user2 exe!</p>
<p>4.23 â˜˜ï¸è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰<br>ä¸€èˆ¬ä¸»è¦åº”ç”¨åœ¨OOPå¼€å‘ä¸­çš„ç¼–è¯‘å™¨çš„å¼€å‘ä¸­ï¼Œæ‰€ä»¥é€‚ç”¨é¢æ¯”è¾ƒçª„ã€‚</p>
<p>Contextç±»æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒç±»ï¼ŒPluså’ŒMinusåˆ†åˆ«æ˜¯ç”¨æ¥è®¡ç®—çš„å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p>public interface Expression {<br>  public int interpret(Context context);<br>}<br>1<br>2<br>3<br>public class Plus implements Expression { </p>
<p>  @Override<br>  public int interpret(Context context) {<br>    return context.getNum1()+context.getNum2();<br>  }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>public class Minus implements Expression { </p>
<p>  @Override<br>  public int interpret(Context context) {<br>    return context.getNum1()-context.getNum2();<br>  }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>public class Context { </p>
<p>  private int num1;<br>  private int num2; </p>
<p>  public Context(int num1, int num2) {<br>    this.num1 = num1;<br>    this.num2 = num2;<br>  } </p>
<p>  public int getNum1() {<br>    return num1;<br>  }<br>  public void setNum1(int num1) {<br>    this.num1 = num1;<br>  }<br>  public int getNum2() {<br>    return num2;<br>  }<br>  public void setNum2(int num2) {<br>    this.num2 = num2;<br>  }<br>} </p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>public class Test { </p>
<p>  public static void main(String[] args) { </p>
<pre><code>// è®¡ç®—9+2-8çš„å€¼ 
int result = new Minus().interpret((new Context(new Plus() 
    .interpret(new Context(9, 2)), 8))); 
System.out.println(result); 
</code></pre>
<p>  }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>è§£é‡Šå™¨æ¨¡å¼ç”¨æ¥åšå„ç§å„æ ·çš„è§£é‡Šå™¨ï¼Œå¦‚æ­£åˆ™è¡¨è¾¾å¼ç­‰çš„è§£é‡Šå™¨ç­‰ç­‰ï¼<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<pre><code>                        ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚
</code></pre>
<p>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_28419035/article/details/141459029">https://blog.csdn.net/qq_28419035/article/details/141459029</a></p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/09/13/study/Mybatis%20%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="prev" title="Mybatis åŸºç¡€çŸ¥è¯†">
                  <i class="fa fa-angle-left"></i> Mybatis åŸºç¡€çŸ¥è¯†
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/09/21/study/Java%20%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="next" title="Javaé«˜é¢‘é¢è¯•é¢˜">
                  Javaé«˜é¢‘é¢è¯•é¢˜ <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">é—½ICPå¤‡2024060482å· </a>
  </div>
  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Panzejia</span>
  </div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
